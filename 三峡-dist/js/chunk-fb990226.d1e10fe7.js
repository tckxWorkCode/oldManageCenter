(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb990226"],{"167a":function(t,e,a){},4406:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAByElEQVQ4jX3US2sTURQH8N80rQRF0p0LQVDcKBFX6kJn41trEAUX0rUYQYjgxo/gxkfARfQziFRqdaNSHPEFbiTUhYp04UZEqFRIEI3cZCpj6M0f7sycew7/8x4xdOrVtZ16NYkaDOE/w069WsUVHMQG/MJr3Ci32vdGEY0NyZcwnZMETGAfrgahmYlGOD4kH43YPczfM83MK9xtpD40MyVswoF/Hjr16g68ixAduj3dfotvhSx+56UJ8nwxtSMRkmVkODxUilJBnisqguEztHAdT/AHj8utdhfHI476qRdrdLrcai8XtZ16dWsofDPrez4WIVlspBYGRLNLpTJ7TEmxHd/xtMyMWuVjc9pGrIkQPVDo2k1cHDI4jxfY20h9aWY24wx2YV2IJKQdCl0kOhHx1g6PXuZcaHmSukP/yO/Hk7TfPYnZpW1YiBCd7E1WQlRf0c0j/JSnuQU/knQQxPiIInbzzp3K56WM/flZweWVj7ERbZ1Xq/zEVEQf8KhIdB878wKuzxc2LOhcb7ACYb5Ww2KSer+iiP8mZpfGepOV3XgZsWglqQvFiFZHrRKm+g3O4nm+W+HuM27h2oiU4+hlJsJZ1QJ/AbUacHd8375/AAAAAElFTkSuQmCC"},cd2b:function(t,e,a){"use strict";a("167a")},d521:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAB8klEQVQ4jZXTP2gTcRTA8a+vZ6uN6aBVDBpKmiCCf4qGCBUNFQpKJnHRgn/QQbAKWkUXZ4d2EwQ3xS5OWrtoF0EQHCI0g1mEC6FZWmxE0qa/NE3vfnKhV870EtsHb7h7v9/n3e/4PVqFCEdF+CrCsggZERItNzQLEbIiaE/+EiGwVcTo6ztmh8MH9MBAUg8NXXHBQb/1RgtrV/JschtSIxaNYFntTE19olQqHdwqtLI7kOZqahpB+FE4SXW57Lzf43uCZopto1Ln9tpdOy0CHTVOHSljGO1OKdWiuU8H4fjk5IReXXyrV8vvtda2Hh6+4/6n/s0iwXj8hGlZlvZGJpNxoZwIXZuBHo+NjWq/SCTiLvb8f4gRDAYKxWLRFxoff+NCFRH2tYJuOHemWeRyOe8Fvb2+z8e6l0g0n4RQKOR9POwLKZMdhTS6p3tirhm0ODda2W5AWxtcvMD8hgXK5JIy+aJMtDKxn4wMVpRSGw7o1F88I/v9I9PK5IMfNLuG1DP7mZ8PRx78iywV1+trWVMmtxqPprxwbw+Hbl6u1mfCiZmZGR7dT/1u6O+M2N1GyGz8yu6OlwuxWC9ORqMR/syni57yCvAUOO2K9eiMcV6Z7AfOANeB/tIC7/L5/GtgFqhGwvXReAUsAdc6Y3yrbwb+AubOLu3Wc3mcAAAAAElFTkSuQmCC"},e522:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{staticClass:"container"},[s("div",{staticClass:"topNav"},[s("el-breadcrumb",{staticClass:"breadNav",attrs:{separator:"/"}},[s("el-breadcrumb-item",{staticClass:"crumb1"},[t._v("首页")]),s("el-breadcrumb-item",{staticClass:"crumb1"},[t._v("外设控制")]),s("el-breadcrumb-item",{staticClass:"crumb2"},[t._v("光驱控制")])],1)],1),s("div",{staticClass:"wrap"},[s("div",{staticClass:"search"},[s("el-form",{ref:"formInline",staticClass:"formInline",attrs:{inline:!0,"label-position":"right","label-width":"145px",model:t.formInline,size:"small"},nativeOn:{submit:function(t){t.preventDefault()}}},[s("el-form-item",{attrs:{label:"终端名称/网络地址：",prop:"terminalName"}},[s("el-input",{attrs:{clearable:"",placeholder:"请输入终端名称/网络地址",oninput:"value=value.replace(/[%]/g, '')"},model:{value:t.formInline.terminalName,callback:function(e){t.$set(t.formInline,"terminalName",e)},expression:"formInline.terminalName"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.advancedSearch,expression:"advancedSearch==true"}],attrs:{label:"日期：",prop:"startDate"}},[s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"date",placeholder:"选择开始时间"},model:{value:t.formInline.startDate,callback:function(e){t.$set(t.formInline,"startDate",e)},expression:"formInline.startDate"}}),t._v(" "),s("span",{},[t._v("至")]),t._v(" "),s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"date",placeholder:"选择结束时间"},model:{value:t.formInline.endDate,callback:function(e){t.$set(t.formInline,"endDate",e)},expression:"formInline.endDate"}})],1),s("el-form-item",{staticClass:"advancedBtn"},[s("el-button",{staticClass:"resetBtn",attrs:{size:"small"},on:{click:t.resetForm}},[t._v("重置")]),s("el-button",{staticClass:"searchBtn",attrs:{size:"small"},on:{click:t.searchData}},[t._v("查询")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.advancedFlag,expression:"advancedFlag==true"}],staticClass:"gaoji",attrs:{size:"small"},on:{click:t.switchBtn}},[t._v("展开"),s("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-weight":"bold"}})]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.advancedFlag,expression:"advancedFlag==false"}],staticClass:"gaoji",attrs:{size:"small"},on:{click:t.switchBtn}},[t._v("收起"),s("i",{staticClass:"el-icon-arrow-up el-icon--right",staticStyle:{"font-weight":"bold"}})])],1)],1)],1),s("div",{staticClass:"mainContainer"},[s("div",{staticClass:"tableTitle"},[t._v("光驱控制")]),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tcmTable",staticStyle:{width:"99.9%","font-size":"14px"},attrs:{data:t.cdData,size:"small","tooltip-effect":"light","cell-style":{color:"rgba(0, 0, 0, 0.9)"},"element-loading-text":"加载中，请稍后","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},fit:!0},on:{"sort-change":t.sortChange}},[s("template",{slot:"empty"},[s("div",[t._v("暂无数据")])]),s("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"序号",width:"80px"}}),s("el-table-column",{attrs:{prop:"name",label:"终端名称","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"ip",label:"网络地址"}}),s("el-table-column",{attrs:{prop:"cdromStatus",label:"状态","min-width":"100%",formatter:t.statusVal}}),s("el-table-column",{attrs:{prop:"system",label:"系统类型","min-width":"100%","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return["Linux"==e.row.system||"linux"==e.row.system||"Unix"==e.row.system||"unix"==e.row.system?s("span",[s("img",{attrs:{src:a("d521")}}),s("span",{staticStyle:{"padding-left":"10px"}},[t._v(t._s(e.row.system))])]):e.row.system.indexOf("win")?s("span",[s("img",{attrs:{src:a("4406")}}),t._v(" "),s("span",[t._v(t._s(e.row.system))])]):t._e()]}}])}),s("el-table-column",{attrs:{prop:"onlineStatus",label:"是否在线"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.onlineStatus?s("span",[s("span",{staticClass:"aqua"},[t._v("●")]),t._v("在线")]):"0"==e.row.onlineStatus?s("span",[s("span",{staticClass:"lightRed"},[t._v("●")]),t._v("离线")]):t._e()]}}])}),s("el-table-column",{attrs:{prop:"cdromTime",label:"更新时间",sortable:"custom","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{fixed:"right",label:"操作",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"switchClass"},[s("el-switch",{attrs:{"active-text":"启用","inactive-text":"停用","active-value":1,"inactive-value":0},on:{change:function(a){return t.switchChange(e.row,e.$index)}},model:{value:e.row.cdromSwitch,callback:function(a){t.$set(e.row,"cdromSwitch",a)},expression:"scope.row.cdromSwitch"}})],1)]}}])})],2),t.pageShow?s("el-pagination",{staticClass:"paging",attrs:{align:"right","current-page":t.currentPage.sync,"page-sizes":[10,20],"page-size":t.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)])])])},n=[],i=(a("d81d"),a("ac1f"),a("5319"),a("b775")),r=a("ac95"),l=a("b893"),o={name:"TcmInfo",data:function(){return{loading:!1,formInline:{terminalName:"",startDate:"",endDate:""},advancedSearch:!0,advancedFlag:!1,emptytxt:"",cdData:[],orderBy:"",currentPage:1,total:0,pageSize:10,pageShow:!0,autorefresh:""}},created:function(){Object(l["b"])(this.searchData)},mounted:function(){this.loadData()},beforeDestroy:function(){document.onkeydown=null},methods:{loadData:function(){var t=this;this.loading=!0,Object(i["a"])({url:"/searchOpolicyStatus",method:"post",data:{condition:this.formInline.terminalName,firstTime:this.formInline.startDate,lastTime:this.formInline.endDate,orderBy:this.orderBy,searchPage:this.currentPage,searchSize:this.pageSize}}).then((function(e){var a=e.data;t.loading=!1,a.list&&(a.list.map((function(t,e){t.beHostTime=Object(r["a"])(t.beHostTime)})),t.total=a.total,t.cdData=a.list),0==a.total?t.emptytxt=!0:t.emptytxt=!1}))},switchBtn:function(){this.advancedSearch=!this.advancedSearch,this.advancedFlag=!this.advancedFlag},searchData:function(){var t=this;this.currentPage=1,this.loadData(),this.pageShow=!1,this.$nextTick((function(){t.pageShow=!0}))},statusVal:function(t){var e=this.$createElement,a="";if(0==t.cdromStatus)a=e("span",{class:"wathet"},["下发中"]);else if(1==t.cdromStatus)a=e("span",{class:"green"},["已生效"]);else if(2==t.cdromStatus){var s=Object(l["a"])(t.cdromRes);a=s?e("span",{class:"red"},["下发失败（",s,"）"]):t.cdromRes?e("span",{class:"red"},["下发失败（错误码：",t.cdromRes,"）"]):e("span",{class:"red"},["下发失败"])}else a=e("span",{class:"grey"},["初始化状态"]);return a},indexMethod:function(t){return 1===this.currentPage?t<9?"0"+(t+1):t+1:t+1+this.pageSize*(this.currentPage-1)},sortChange:function(t,e,a){a=t.prop.replace(/([A-Z])/g,"_$1").toLowerCase();"ascending"==t.order?this.orderBy=a:this.orderBy=a+" desc",this.loadData()},handleSizeChange:function(t){var e=this;this.currentPage=1,this.pageSize=t,this.pageShow=!1,this.$nextTick((function(){e.pageShow=!0})),this.loadData()},handleCurrentChange:function(t){this.currentPage=t,this.loadData()},resetForm:function(){this.formInline.endDate="",this.formInline=Object.assign({},void 0),this.$refs.formInline.resetFields()},switchChange:function(t,e){var a=this,s=1==t.cdromSwitch?"启用":"禁用";this.$confirm("确定".concat(s,"此设备？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])({url:"/creatCdromPolicy",method:"post",data:{cdromSwitch:t.cdromSwitch,nodeId:t.nodeId}}).then((function(e){var s=e.data;0===s.status?(a.$message({message:"操作成功!",type:"success",showClose:!0}),a.initData()):(t.cdromSwitch=!t.cdromSwitch,clearInterval(a.autorefresh))}))})).catch((function(){t.cdromSwitch=!t.cdromSwitch,clearInterval(a.autorefresh)}))},initData:function(){var t=this;t.autorefresh=setInterval((function(){t.loadData()}),3e3)}},destroyed:function(){clearInterval(this.autorefresh)}},c=o,d=(a("cd2b"),a("2877")),u=Object(d["a"])(c,s,n,!1,null,"6bc0d4ac",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-fb990226.d1e10fe7.js.map