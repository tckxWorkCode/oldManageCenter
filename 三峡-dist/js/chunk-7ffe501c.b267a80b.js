(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ffe501c"],{"3a20":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("div",{staticClass:"container"},[n("div",{staticClass:"topNav"},[n("el-breadcrumb",{staticClass:"breadNav",attrs:{separator:"/"}},[n("el-breadcrumb-item",{staticClass:"crumb1"},[e._v("首页")]),n("el-breadcrumb-item",{staticClass:"crumb1"},[e._v("资产管理")]),n("el-breadcrumb-item",{staticClass:"crumb1"},[e._v("资产列表")]),n("el-breadcrumb-item",{staticClass:"crumb2"},[e._v("可信资产")])],1)],1),n("div",{staticClass:"wrap"},[n("div",{staticClass:"search"},[n("el-form",{ref:"formInline",staticClass:"formInline",attrs:{inline:!0,model:e.formInline,"label-position":e.labelPosition,"label-width":"90px",size:"small"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"终端名称/网络地址：",prop:"terminalName","label-width":"145px"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入终端名称/网络地址",oninput:"value=value.replace(/[%]/g, '')"},model:{value:e.formInline.terminalName,callback:function(t){e.$set(e.formInline,"terminalName",t)},expression:"formInline.terminalName"}})],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.advancedSearch,expression:"advancedSearch==true"}],attrs:{label:"是否在线：",prop:"onlineStatus"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formInline.onlineStatus,callback:function(t){e.$set(e.formInline,"onlineStatus",t)},expression:"formInline.onlineStatus"}},[n("el-option",{attrs:{label:"在线",value:"1"}}),n("el-option",{attrs:{label:"离线",value:"0"}})],1)],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.advancedSearch,expression:"advancedSearch==true"}],attrs:{label:"注册日期：",prop:"startDate"}},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"date",placeholder:"选择开始时间"},model:{value:e.formInline.startDate,callback:function(t){e.$set(e.formInline,"startDate",t)},expression:"formInline.startDate"}}),e._v(" "),n("span",{},[e._v("至")]),e._v(" "),n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"date",placeholder:"选择结束时间"},model:{value:e.formInline.endDate,callback:function(t){e.$set(e.formInline,"endDate",t)},expression:"formInline.endDate"}})],1),n("el-form-item",{staticClass:"advancedBtn"},[n("el-button",{staticClass:"resetBtn",attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")]),n("el-button",{staticClass:"searchBtn",attrs:{size:"small"},on:{click:e.searchData}},[e._v("查询")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.advancedFlag,expression:"advancedFlag==true"}],staticClass:"gaoji",attrs:{size:"small"},on:{click:e.switchBtn}},[e._v("展开"),n("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-weight":"bold"}})]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.advancedFlag,expression:"advancedFlag==false"}],staticClass:"gaoji",attrs:{size:"small"},on:{click:e.switchBtn}},[e._v("收起"),n("i",{staticClass:"el-icon-arrow-up el-icon--right",staticStyle:{"font-weight":"bold"}})])],1)],1)],1),n("div",{staticClass:"mainContainer"},[n("div",{staticClass:"tableTitle"},[e._v("资产列表")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"terminalTable",staticStyle:{"font-size":"14px"},attrs:{data:e.terminalData,"element-loading-text":"加载中，请稍后","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"tooltip-effect":"light","cell-style":e.cellStyle},on:{"sort-change":e.sortChange}},[n("template",{slot:"empty"},[n("div",[e._v("暂无数据")])]),n("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50px"}}),n("el-table-column",{attrs:{prop:"name",label:"终端名称","min-width":"120%","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{prop:"ip",label:"网络地址","min-width":"100%"}}),n("el-table-column",{attrs:{prop:"system",label:"系统类型","min-width":"100%","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return["Linux"==t.row.system||"linux"==t.row.system||"Unix"==t.row.system||"unix"==t.row.system?n("span",[n("img",{attrs:{src:a("d521")}}),n("span",{staticStyle:{"padding-left":"10px"}},[e._v(e._s(t.row.system))])]):t.row.system.indexOf("win")?n("span",[n("img",{attrs:{src:a("4406")}}),e._v(" "),n("span",[e._v(e._s(t.row.system))])]):e._e()]}}])}),n("el-table-column",{attrs:{prop:"arch",label:"体系架构","min-width":"70%"}}),n("el-table-column",{attrs:{prop:"onlineStatus",label:"是否在线","min-width":"80%"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.onlineStatus?n("span",[n("span",{staticClass:"aqua"},[e._v("●")]),e._v("在线")]):"0"==t.row.onlineStatus?n("span",[n("span",{staticClass:"lightRed"},[e._v("●")]),e._v("离线")]):e._e()]}}])}),n("el-table-column",{attrs:{prop:"installerTime","show-overflow-tooltip":"","min-width":"100%",label:"注册时间",sortable:"custom"}}),n("el-table-column",{attrs:{prop:"tpcmLicStateString",label:"产品授权","show-overflow-tooltip":!0,"min-width":"110%"}}),"system"==e.userName||"httcadmin"==e.userName?n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{color:"#1ac492"},attrs:{type:"text"},on:{click:function(a){return e.editMessage(t.row)}}},[e._v("修改")]),"0"==t.row.onlineStatus||"1"==t.row.status?n("el-button",{staticStyle:{color:"#1ac492"},attrs:{type:"text"},on:{click:function(a){return e.cancellation(t.row)}}},[e._v("模式切换")]):n("el-button",{attrs:{type:"text",disabled:""}},[e._v("模式切换")]),"0"==t.row.onlineStatus?n("el-button",{staticStyle:{color:"#FF4D4F"},attrs:{type:"text"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")]):n("el-button",{attrs:{type:"text",disabled:""}},[e._v("删除")])]}}],null,!1,1089242519)}):e._e()],2),e.pageShow?n("el-pagination",{staticClass:"paging",attrs:{align:"right","current-page":e.currentPage.sync,"page-sizes":[10,20],"page-size":e.pageSize,layout:"total, prev,pager, next,sizes, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)])]),n("edit-name",{ref:"editName",on:{addSuccess:e.refresh}})],1)},i=[],l=(a("d81d"),a("ac1f"),a("5319"),a("b775")),s=a("ac95"),o=a("b893"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"修改终端名称",width:"25%",visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.diaClose}},[a("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"100px",rules:e.rules,model:e.ruleForm,size:"small"}},[a("el-form-item",{attrs:{prop:"ip",label:"网络地址："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{clearable:"",disabled:""},model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}},[e._v(e._s(e.ip))])],1),a("el-form-item",{attrs:{prop:"name",label:"终端名称："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{clearable:"",placeholder:"请输入终端名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"canBtn",attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{staticClass:"sureBtn",attrs:{size:"small",disabled:e.btnvalue1},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")])],1)],1)},c=[],d=(a("b0c0"),{name:"AddIdentity",data:function(){var e=function(e,t,a){""===t?a(new Error("请输入终端名称")):t.length>20?a(new Error("终端名称长度不超出20个字符")):/[^\a-\z\A-\Z0-9\u4E00-\u9FA5\_\.]/g.test(t)?a(new Error("终端名称只能输入中文、英文、数字、_和.符号")):a()};return{btnvalue1:!1,dialogFormVisible:!1,labelPosition:"right",rules:{name:[{required:!0,validator:e,trigger:"blur"}]},ruleForm:{name:""},nodeId:"",ip:""}},methods:{diaOpen:function(e){var t=this;this.nodeId=e.nodeId,this.ip=e.ip,this.ruleForm.name=e.name,t.dialogFormVisible=!0,t.btnvalue1=!1,t.$nextTick((function(){t.$refs.ruleForm.clearValidate()}))},diaClose:function(){var e=this;e.dialogFormVisible=!1},submitForm:function(e){var t=this;t.$refs[e].validate((function(e){if(!e)return t.btnvalue1=!1,!1;t.btnvalue1=!0,Object(l["a"])({url:"/sys/editNodeInfo",data:{nodeId:t.nodeId,name:t.ruleForm.name},method:"post"}).then((function(e){var a=e.data;0===a.status?(t.$message({message:"操作成功!",type:"success",showClose:!0}),t.dialogFormVisible=!1,t.$emit("addSuccess")):t.btnvalue1=!1}))}))},resetForm:function(e){var t=this;t.$refs[e].resetFields()}}}),u=d,m=(a("b342"),a("2877")),h=Object(m["a"])(u,r,c,!1,null,null,null),p=h.exports,f={name:"TerminalManage",components:{EditName:p},data:function(){return{userName:"",loading:!1,labelPosition:"right",formInline:{terminalName:"",onlineStatus:"",startDate:"",endDate:""},orderBy:"installer_time desc",advancedSearch:!0,advancedFlag:!1,emptytxt:"",terminalData:[],currentPage:1,total:0,pageSize:10,pageShow:!0,autorefresh:""}},created:function(){Object(o["b"])(this.searchData)},mounted:function(){this.userName=localStorage.getItem("userType"),this.loadData()},beforeDestroy:function(){document.onkeydown=null},methods:{loadData:function(){var e=this;this.loading=!0,Object(l["a"])({url:"/LNodeList",method:"post",data:{condition:this.formInline.terminalName,firstTime:this.formInline.startDate,lastTime:this.formInline.endDate,orderBy:this.orderBy,online_status:this.formInline.onlineStatus,searchPage:this.currentPage,searchSize:this.pageSize}}).then((function(t){var a=t.data;e.loading=!1,a.list&&(a.list.map((function(e,t){e.installerTime=Object(s["a"])(e.installerTime)})),e.terminalData=a.list),e.total=a.total,0==a.total?e.emptytxt=!0:e.emptytxt=!1}))},switchBtn:function(){this.advancedSearch=!this.advancedSearch,this.advancedFlag=!this.advancedFlag},indexMethod:function(e){return 1===this.currentPage?e<9?"0"+(e+1):e+1:e+1+this.pageSize*(this.currentPage-1)},sortChange:function(e,t,a){a=e.prop.replace(/([A-Z])/g,"_$1").toLowerCase();"ascending"==e.order?this.orderBy=a:this.orderBy=a+" desc",this.loadData()},searchData:function(){var e=this;this.currentPage=1,this.loadData(),this.pageShow=!1,this.$nextTick((function(){e.pageShow=!0}))},cellStyle:function(){var e;return e="safe"==this.userName?"padding:7px 0px;color: rgba(0, 0, 0, 0.9)":"padding:0px 0px;color: rgba(0, 0, 0, 0.9)",e},handleSizeChange:function(e){var t=this;this.currentPage=1,this.pageSize=e,this.pageShow=!1,this.$nextTick((function(){t.pageShow=!0})),this.loadData()},handleCurrentChange:function(e){null!=e&&(this.currentPage=e,this.loadData())},editMessage:function(e){this.$refs.editName.diaOpen(e)},cancellation:function(e){var t=this;this.$confirm("确定注销此终端？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["a"])({url:"/sys/LogOutByNodeId?node_id="+e.nodeId,method:"post"}).then((function(e){var a=e.data;0==a.status&&(t.$message({message:"操作成功!",type:"success",showClose:!0}),t.refresh())}))})).catch((function(e){}))},del:function(e){var t=this;this.$confirm("确定删除此终端？该操作不可逆转，请谨慎操作","提示",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"btnColor",type:"warning"}).then((function(){Object(l["a"])({url:"/sys/deleteNodeById?node_id="+e.nodeId,method:"post"}).then((function(e){var a=e.data;0==a.status&&(t.$message({message:"操作成功!",type:"success",showClose:!0}),t.refresh())}))})).catch((function(e){}))},refresh:function(){var e=this,t=0;e.autorefresh=setInterval((function(){t++,e.loadData(),t>4&&clearInterval(e.autorefresh)}),3e3)},resetForm:function(){this.formInline.endDate="",this.formInline=Object.assign({},void 0),this.$refs.formInline.resetFields()}},destroyed:function(){clearInterval(this.autorefresh)}},b=f,v=(a("7887"),Object(m["a"])(b,n,i,!1,null,"4824894e",null));t["default"]=v.exports},4406:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAByElEQVQ4jX3US2sTURQH8N80rQRF0p0LQVDcKBFX6kJn41trEAUX0rUYQYjgxo/gxkfARfQziFRqdaNSHPEFbiTUhYp04UZEqFRIEI3cZCpj6M0f7sycew7/8x4xdOrVtZ16NYkaDOE/w069WsUVHMQG/MJr3Ci32vdGEY0NyZcwnZMETGAfrgahmYlGOD4kH43YPczfM83MK9xtpD40MyVswoF/Hjr16g68ixAduj3dfotvhSx+56UJ8nwxtSMRkmVkODxUilJBnisqguEztHAdT/AHj8utdhfHI476qRdrdLrcai8XtZ16dWsofDPrez4WIVlspBYGRLNLpTJ7TEmxHd/xtMyMWuVjc9pGrIkQPVDo2k1cHDI4jxfY20h9aWY24wx2YV2IJKQdCl0kOhHx1g6PXuZcaHmSukP/yO/Hk7TfPYnZpW1YiBCd7E1WQlRf0c0j/JSnuQU/knQQxPiIInbzzp3K56WM/flZweWVj7ERbZ1Xq/zEVEQf8KhIdB878wKuzxc2LOhcb7ACYb5Ww2KSer+iiP8mZpfGepOV3XgZsWglqQvFiFZHrRKm+g3O4nm+W+HuM27h2oiU4+hlJsJZ1QJ/AbUacHd8375/AAAAAElFTkSuQmCC"},4501:function(e,t,a){},"680e":function(e,t,a){},7887:function(e,t,a){"use strict";a("4501")},b342:function(e,t,a){"use strict";a("680e")},d521:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAB8klEQVQ4jZXTP2gTcRTA8a+vZ6uN6aBVDBpKmiCCf4qGCBUNFQpKJnHRgn/QQbAKWkUXZ4d2EwQ3xS5OWrtoF0EQHCI0g1mEC6FZWmxE0qa/NE3vfnKhV870EtsHb7h7v9/n3e/4PVqFCEdF+CrCsggZERItNzQLEbIiaE/+EiGwVcTo6ztmh8MH9MBAUg8NXXHBQb/1RgtrV/JschtSIxaNYFntTE19olQqHdwqtLI7kOZqahpB+FE4SXW57Lzf43uCZopto1Ln9tpdOy0CHTVOHSljGO1OKdWiuU8H4fjk5IReXXyrV8vvtda2Hh6+4/6n/s0iwXj8hGlZlvZGJpNxoZwIXZuBHo+NjWq/SCTiLvb8f4gRDAYKxWLRFxoff+NCFRH2tYJuOHemWeRyOe8Fvb2+z8e6l0g0n4RQKOR9POwLKZMdhTS6p3tirhm0ODda2W5AWxtcvMD8hgXK5JIy+aJMtDKxn4wMVpRSGw7o1F88I/v9I9PK5IMfNLuG1DP7mZ8PRx78iywV1+trWVMmtxqPprxwbw+Hbl6u1mfCiZmZGR7dT/1u6O+M2N1GyGz8yu6OlwuxWC9ORqMR/syni57yCvAUOO2K9eiMcV6Z7AfOANeB/tIC7/L5/GtgFqhGwvXReAUsAdc6Y3yrbwb+AubOLu3Wc3mcAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=chunk-7ffe501c.b267a80b.js.map