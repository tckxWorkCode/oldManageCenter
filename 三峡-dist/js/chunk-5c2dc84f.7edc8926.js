(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c2dc84f"],{2532:function(t,e,a){"use strict";var i=a("23e7"),l=a("5a34"),s=a("1d80"),n=a("ab13");i({target:"String",proto:!0,forced:!n("includes")},{includes:function(t){return!!~String(s(this)).indexOf(l(t),arguments.length>1?arguments[1]:void 0)}})},"2b8b":function(t,e,a){t.exports=a.p+"img/nodata1.3cbcbf06.png"},"2e7f":function(t,e,a){"use strict";a("a6b0")},4406:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAByElEQVQ4jX3US2sTURQH8N80rQRF0p0LQVDcKBFX6kJn41trEAUX0rUYQYjgxo/gxkfARfQziFRqdaNSHPEFbiTUhYp04UZEqFRIEI3cZCpj6M0f7sycew7/8x4xdOrVtZ16NYkaDOE/w069WsUVHMQG/MJr3Ci32vdGEY0NyZcwnZMETGAfrgahmYlGOD4kH43YPczfM83MK9xtpD40MyVswoF/Hjr16g68ixAduj3dfotvhSx+56UJ8nwxtSMRkmVkODxUilJBnisqguEztHAdT/AHj8utdhfHI476qRdrdLrcai8XtZ16dWsofDPrez4WIVlspBYGRLNLpTJ7TEmxHd/xtMyMWuVjc9pGrIkQPVDo2k1cHDI4jxfY20h9aWY24wx2YV2IJKQdCl0kOhHx1g6PXuZcaHmSukP/yO/Hk7TfPYnZpW1YiBCd7E1WQlRf0c0j/JSnuQU/knQQxPiIInbzzp3K56WM/flZweWVj7ERbZ1Xq/zEVEQf8KhIdB878wKuzxc2LOhcb7ACYb5Ww2KSer+iiP8mZpfGepOV3XgZsWglqQvFiFZHrRKm+g3O4nm+W+HuM27h2oiU4+hlJsJZ1QJ/AbUacHd8375/AAAAAElFTkSuQmCC"},"4f6a":function(t,e,a){},"5a34":function(t,e,a){var i=a("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"6bd2":function(t,e,a){"use strict";a("a15d")},"6e85":function(t,e,a){},8466:function(t,e,a){"use strict";a("92d4")},"8a3c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA9UlEQVQ4je3UvyuFURzH8ZeLgQyUhE0Zrf4Gmf0LymImf4PNoBjtVpHFYGSwKxQTEyWUm46+t557uo+H5z6jT53O+f7ofTrnfM93YPZ8Z1CDavVATfWDz4FjuMdiXeBQZo/EJkf4yGLJPsA+Hn4LHI15oiR/E1s4wWP4XrGNu17AKnXylwt5bcxgRcmj/FWtAGoK2KV/YPPA94r8zypgXodvMa/hIoul0ljHUoDb4U/N5bIM2NE1rjJfso8xF4U9HP70Yw6rgD/pBrtl8eIdjmMh1vOYrrFZFzB1kbNY7+G0DrB45FVsYBJPeOkX+Bzjtg7oW/gCIJElwLoetVgAAAAASUVORK5CYII="},"8ff6":function(t,e,a){"use strict";a("4f6a")},"90eb":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAACu0lEQVRYhc2YP2hTURSHv6ShpPXPogGHaomgiXYRMRQbdQptHcRBUNBJkKqok6O7u1qRdtDJioo4KNRSJzUVqUUEo80SqUWEKlJUYhtNIiecF17TJs2776X1B4/wyL2/8+Xl3XPOvb7ZS3twqDDQA+wDdgDtwDq1+AlMAR+AF8AI8NGJfaDOcU3AUeA8sBfwVRm3Qa/dwAmgCLwE+oF7QH65QP46YBLAO2AI6KoBs5R8OmdIPRJugILAADAKRB1AVFNUvQbU2xFQCHgG9HkAUqk+9Q7VCyQDnwOxBsBYimmMRVCVQK3AIyDSQBhLEY3VWgvoCtC5AjCWOjVmWfZlLyvglFPHNWduE2jbXr6fTz5kbviyEwuJeRd4iu0JyedVpzAe6prmujLQMc26q6WoJt4y0LlVhLEkVaAEFNZs6okKs19MbaQkbRWgXofloKYK3z+bThWGHgGKewXjgeIC1OHGJz+V8hJopwBt9tLRpdr9tubqf9DaevqhFZVf207PlJ9+48bqlwBNewlUzH51M/2TFNf3wC5Th9z4A/5mXruBsCsV0N3BcVOHwrd06fJIyYBuVYqm2ToQ6SbYe5amUBu5VJL50RumgMIwIu9QBhgz/YEthy+WYETNHXGaY0dMrWS7lLGW/XVTF1+wZcG9f1PY1KofW/shm7hJE5fc+JOF92P3TWwmlQH7Vjqh+ybH8m+MENjWxZ+3j02XfbcV295TS097Czjp1E1e4pz5SrtpfxCVpUO6tlemzgaSWBfs0yqBssAhwLPEUkNpjZWtBSSSl+AAMNFAmAmNseiFq1btZ4D9wGADYAb1bGlmqS9rtR+/gdO6Arz4C9PqJZ5z1QbV0w/JCpA2V+qdZFNJ8U4kc+TwSjyWTSv1nqDJydcdvSQVH9THLhu8LcB6HfdDWghNdFK0hx0d6QH/AJE/mAPE60FoAAAAAElFTkSuQmCC"},"92d4":function(t,e,a){},a15d:function(t,e,a){},a6b0:function(t,e,a){},ab13:function(t,e,a){var i=a("b622"),l=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[l]=!1,"/./"[t](e)}catch(i){}}return!1}},b313:function(t,e,a){"use strict";a("6e85")},b789:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA9ElEQVQ4je3UvyuFURzH8ZeLgQyUxKiMVn+DzPY7KYuZ/A12xWi3iiz+AAa7QjExUeKWm46+t557uo+H5z6jT53O+f7ofTrnfM93pNNuj2pQrQGouWHwOXAKD1ipCxzL7InY5ASdLJbsIxzi8bfAyZhnSvJ3sIszPIXvDXu4HwSsUi9/rZDXxQLWlTzKX9UKoKaAffoHNg/8qMj/rALmdfge8yYus1gqjS2sBrgb/tRcrsqAPd3gOvMl+xSLUdjj4U8/5rgK+JNusV8WL97hNJZjvYT5Gpv1AVMXuYj1Ac7rAItH3sA2ZvGM12GBLzHu6oC+hS/cICYG7OSpkwAAAABJRU5ErkJggg=="},d521:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAB8klEQVQ4jZXTP2gTcRTA8a+vZ6uN6aBVDBpKmiCCf4qGCBUNFQpKJnHRgn/QQbAKWkUXZ4d2EwQ3xS5OWrtoF0EQHCI0g1mEC6FZWmxE0qa/NE3vfnKhV870EtsHb7h7v9/n3e/4PVqFCEdF+CrCsggZERItNzQLEbIiaE/+EiGwVcTo6ztmh8MH9MBAUg8NXXHBQb/1RgtrV/JschtSIxaNYFntTE19olQqHdwqtLI7kOZqahpB+FE4SXW57Lzf43uCZopto1Ln9tpdOy0CHTVOHSljGO1OKdWiuU8H4fjk5IReXXyrV8vvtda2Hh6+4/6n/s0iwXj8hGlZlvZGJpNxoZwIXZuBHo+NjWq/SCTiLvb8f4gRDAYKxWLRFxoff+NCFRH2tYJuOHemWeRyOe8Fvb2+z8e6l0g0n4RQKOR9POwLKZMdhTS6p3tirhm0ODda2W5AWxtcvMD8hgXK5JIy+aJMtDKxn4wMVpRSGw7o1F88I/v9I9PK5IMfNLuG1DP7mZ8PRx78iywV1+trWVMmtxqPprxwbw+Hbl6u1mfCiZmZGR7dT/1u6O+M2N1GyGz8yu6OlwuxWC9ORqMR/syni57yCvAUOO2K9eiMcV6Z7AfOANeB/tIC7/L5/GtgFqhGwvXReAUsAdc6Y3yrbwb+AubOLu3Wc3mcAAAAAElFTkSuQmCC"},e0fb:function(t,e,a){},e407:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("div",{staticClass:"container"},[i("div",{staticClass:"topNav"},[i("el-breadcrumb",{staticClass:"breadNav",attrs:{separator:"/"}},[i("el-breadcrumb-item",{staticClass:"crumb1"},[t._v("首页")]),i("el-breadcrumb-item",{staticClass:"crumb1"},[t._v("策略管理")]),i("el-breadcrumb-item",{staticClass:"crumb1"},[t._v("外设控制")]),i("el-breadcrumb-item",{staticClass:"crumb2"},[t._v("U盘策略")])],1)],1),i("div",{staticClass:"wrap"},[i("div",{staticClass:"search"},[i("el-form",{ref:"formInline",staticClass:"formInline",attrs:{inline:!0,"label-position":"right","label-width":"145px",model:t.formInline,size:"small"},nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",{attrs:{label:"终端名称/网络地址：",prop:"terminalName"}},[i("el-input",{attrs:{clearable:"",placeholder:"请输入终端名称/网络地址",oninput:"value=value.replace(/[%]/g, '')"},model:{value:t.formInline.terminalName,callback:function(e){t.$set(t.formInline,"terminalName",e)},expression:"formInline.terminalName"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.advancedSearch,expression:"advancedSearch==true"}],attrs:{label:"日期：",prop:"startDate"}},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"date",placeholder:"选择开始时间"},model:{value:t.formInline.startDate,callback:function(e){t.$set(t.formInline,"startDate",e)},expression:"formInline.startDate"}}),t._v(" "),i("span",{},[t._v("至")]),t._v(" "),i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"date",placeholder:"选择结束时间"},model:{value:t.formInline.endDate,callback:function(e){t.$set(t.formInline,"endDate",e)},expression:"formInline.endDate"}})],1),i("el-form-item",{staticClass:"advancedBtn"},[i("el-button",{staticClass:"resetBtn",attrs:{size:"small"},on:{click:t.resetForm}},[t._v("重置")]),i("el-button",{staticClass:"searchBtn",attrs:{size:"small"},on:{click:t.searchData}},[t._v("查询")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.advancedFlag,expression:"advancedFlag==true"}],staticClass:"gaoji",attrs:{size:"small"},on:{click:t.switchBtn}},[t._v("展开"),i("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-weight":"bold"}})]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.advancedFlag,expression:"advancedFlag==false"}],staticClass:"gaoji",attrs:{size:"small"},on:{click:t.switchBtn}},[t._v("收起"),i("i",{staticClass:"el-icon-arrow-up el-icon--right",staticStyle:{"font-weight":"bold"}})])],1)],1)],1),i("div",{staticClass:"mainContainer"},[i("div",{staticClass:"tableTitle"},[t._v("策略列表")]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"terminalTable",staticStyle:{width:"99.9%","font-size":"14px"},attrs:{data:t.terminalData,"tooltip-effect":"light","element-loading-text":"加载中，请稍后","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"cell-style":{padding:"0px",color:"rgba(0, 0, 0, 0.9)"}},on:{"sort-change":t.sortChange}},[i("template",{slot:"empty"},[i("div",[t._v("暂无数据")])]),i("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"序号",width:"50px"}}),i("el-table-column",{attrs:{prop:"name",label:"终端名称","min-width":"100%","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"ip",label:"网络地址","min-width":"100%"}}),i("el-table-column",{attrs:{prop:"udiskStatus",label:"状态","min-width":"100%",formatter:t.statusVal}}),i("el-table-column",{attrs:{prop:"system",label:"系统类型","min-width":"100%","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return["Linux"==e.row.system||"linux"==e.row.system||"Unix"==e.row.system||"unix"==e.row.system?i("span",[i("img",{attrs:{src:a("d521")}}),i("span",{staticStyle:{"padding-left":"10px"}},[t._v(t._s(e.row.system))])]):e.row.system.indexOf("win")?i("span",[i("img",{attrs:{src:a("4406")}}),t._v(" "),i("span",[t._v(t._s(e.row.system))])]):t._e()]}}])}),i("el-table-column",{attrs:{prop:"onlineStatus",label:"是否在线","min-width":"80%"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.onlineStatus?i("span",[i("span",{staticClass:"aqua"},[t._v("●")]),t._v("在线")]):"0"==e.row.onlineStatus?i("span",[i("span",{staticClass:"lightRed"},[t._v("●")]),t._v("离线")]):t._e()]}}])}),i("el-table-column",{attrs:{prop:"udiskTime","show-overflow-tooltip":!0,"min-width":"100%",label:"创建时间",sortable:"custom"}}),i("el-table-column",{attrs:{fixed:"right",label:"操作",align:"left","min-width":"130%"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticStyle:{color:"#1ac492"},attrs:{type:"text"},on:{click:function(a){return t.configUsb(e.row)}}},[t._v("配置")]),i("el-button",{staticStyle:{color:"#1ac492"},attrs:{type:"text"},on:{click:function(a){return t.checkOnline(e.row)}}},[t._v("查看在线设备")])]}}])})],2),t.pageShow?i("el-pagination",{staticClass:"paging",attrs:{align:"right","current-page":t.currentPage.sync,"page-sizes":[10,20],"page-size":t.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)])]),i("config-usb",{ref:"usb",on:{success:t.initData}}),i("check-online",{ref:"online"})],1)},l=[],s=(a("d81d"),a("ac1f"),a("5319"),a("b775")),n=a("ac95"),r=a("b893"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"配置策略",top:"5vh",width:"65%",visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e},closed:t.diaclose}},[i("el-form",{ref:"ruleForm",staticStyle:{flex:"2"},attrs:{"label-position":"right","label-width":"90px",size:"small"}},[i("el-form-item",{attrs:{prop:"ip",label:"网络地址："}},[i("el-input",{staticStyle:{width:"45%"},attrs:{clearable:"",disabled:""},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}},[t._v(t._s(t.ip))])],1)],1),i("div",{staticStyle:{overflow:"hidden"}},[i("div",{staticStyle:{float:"left",width:"280px","border-right":"1px solid #ddd","padding-right":"20px","margin-right":"20px"}},[i("div",{staticStyle:{}},[i("div",{staticStyle:{"margin-bottom":"8px",color:"#000","font-size":"14px"}},[t._v("当前为"),i("span",{staticStyle:{color:"#1ac492"}},[t._v("已标记")]),t._v("的U盘设备：")]),i("el-input",{attrs:{placeholder:"搜索设备名称或设备ID",clearable:"",size:"small"},model:{value:t.searchTerminalIp,callback:function(e){t.searchTerminalIp=e},expression:"searchTerminalIp"}})],1),i("el-table",{ref:"terminalTable",staticClass:"terminalTable",attrs:{data:t.filterData,"max-height":"50vh",size:"small","show-header":t.headerStatus,"row-key":"guid"},on:{"selection-change":t.handleSelectionChange}},[i("template",{slot:"empty"},[i("div",[t._v("暂无数据")])]),i("el-table-column",{attrs:{"reserve-selection":"",type:"selection",width:"50"}}),i("el-table-column",{attrs:{"min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.deviceName)+"："+t._s(e.row.guid))])]}}])})],2)],1),i("div",{staticStyle:{float:"left",width:"calc(100% - 340px)"}},[i("div",[t._v("已选择 "+t._s(this.tableData2.length)+"个设备")]),i("el-table",{staticClass:"diatable",attrs:{data:t.tableData2,stripe:"","tooltip-effect":"light","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"row-key":"guid","cell-style":{color:"rgba(0, 0, 0, 0.9)"},"max-height":"50vh"}},[i("template",{slot:"empty"},[t.emptytxt2?i("img",{attrs:{src:a("2b8b")}}):t._e()]),i("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),i("el-table-column",{attrs:{prop:"deviceName",label:"设备名称","min-width":"110%"}}),i("el-table-column",{attrs:{prop:"guid",label:"设备ID","min-width":"110%"}}),i("el-table-column",{attrs:{prop:"name",label:"设备别名","min-width":"100%"}}),i("el-table-column",{attrs:{prop:"flag",label:"访问权限"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-select",{attrs:{size:"mini",clearable:"",filterable:"",placeholder:"请选择",disabled:0==e.row.show},model:{value:e.row.flag,callback:function(a){t.$set(e.row,"flag",a)},expression:"scope.row.flag"}},t._l(t.permissionOptions,(function(t){return i("el-option",{key:parseInt(t.value),attrs:{label:t.label,value:t.value}})})),1)]}}])}),i("el-table-column",{attrs:{prop:"",label:"操作","min-width":"100%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"btnClass",attrs:{plain:"",type:"danger",size:"mini"},on:{click:function(a){return t.handleDelete(e.row,e.$index)}}},[t._v(" 删除 ")])]}}])})],2)],1)]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-row",[i("el-col",{attrs:{span:16}},[i("div",{staticClass:"tipText"},[t._v("更改策略需重新 umount/mount U盘")])]),i("el-col",{attrs:{span:8}},[i("el-button",{staticClass:"canBtn",attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),i("el-button",{staticClass:"sureBtn",attrs:{size:"small",disabled:t.btnf1},on:{click:t.submitForm}},[t._v("下发策略")])],1)],1)],1)],1)},c=[],d=(a("4de4"),a("caad"),a("2532"),a("159b"),{name:"AddControl",data:function(){return{btnf1:!1,dialogFormVisible:!1,ip:"",headerStatus:!1,nodeId:"",markedData:[],terminalSelection:[],searchTerminalIp:"",permissionOptions:[{value:2,label:"可读可写"},{value:1,label:"只读"},{value:0,label:"设备不可见"}],emptytxt2:"",tableData2:[]}},computed:{filterData:function(){var t=this;return this.markedData.filter((function(e){return!t.searchTerminalIp||e.deviceName.includes(t.searchTerminalIp)||e.guid.includes(t.searchTerminalIp)}))}},methods:{submitForm:function(){var t=this,e=[];t.tableData2.map((function(t,a){var i={};i.flag=t.flag,i.guid=t.guid,e[a]=i}));var a={nodeId:t.nodeId,disk:e};Object(s["a"])({url:"/creatUdiskPolicy",method:"post",data:a}).then((function(e){var a=e.data;0===a.status?(t.dialogFormVisible=!1,t.$message({message:"操作成功!",type:"success",showClose:!0}),t.$emit("success"),t.$refs.terminalTable.clearSelection()):t.btnf1=!0}))},diaOpen:function(t){var e=this;this.dialogFormVisible=!0,this.btnf1=!1,this.ip=t.ip,this.nodeId=t.nodeId,this.searchTerminalIp="",this.terminalSelection=[],this.tableData2=[],Object(s["a"])({url:"/searchAllOudiskInfo?node_id="+t.nodeId,method:"post",data:{searchPage:"1",searchSize:"10000"}}).then((function(t){var a=t.data;e.markedData=a.data.filter((function(t){return 1==t.isMarked})),a.data.forEach((function(t,a){1==t.isUse&&1==t.isMarked&&e.$refs.terminalTable.toggleRowSelection(t)})),e.tableData2=a.data.filter((function(t){return 1==t.isUse}))}))},diaclose:function(){this.dialogFormVisible=!1,this.$refs.terminalTable.clearSelection()},handleSelectionChange:function(t){t&&(this.terminalSelection=t,this.btnf1=!1),this.tableData2=this.terminalSelection,this.tableData2.map((function(t,e){null!=t.flag&&void 0!=t.flag||(t.flag=2)}))},handleDelete:function(t,e){for(var a=0;a<this.terminalSelection.length;a++)this.terminalSelection[a].guid==t.guid&&this.$refs.terminalTable.toggleRowSelection(this.terminalSelection[a])}}}),u=d,m=(a("eaed0"),a("2877")),p=Object(m["a"])(u,o,c,!1,null,"6988f218",null),h=p.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"查看在线设备清单明细表",top:"5vh",width:"65%",visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.diaClose}},[i("div",{staticStyle:{display:"flex"}},[i("el-form",{ref:"ruleForm",staticStyle:{flex:"2"},attrs:{"label-position":"right","label-width":"90px",size:"small"}},[i("el-form-item",{attrs:{prop:"ip",label:"网络地址："}},[i("el-input",{staticStyle:{width:"45%"},attrs:{clearable:"",disabled:""},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}},[t._v(t._s(t.ip))])],1)],1)],1),i("div",{staticClass:"mark"},[i("div",[i("img",{staticStyle:{"vertical-align":"top"},attrs:{src:a("b789"),alt:""}}),t._v(" "),i("span",[t._v("待标记：")]),i("span",[t._v(t._s(this.tableData.length))])]),i("div",[i("img",{staticStyle:{"vertical-align":"top"},attrs:{src:a("8a3c"),alt:""}}),t._v(" "),i("span",[t._v("已标记：")]),i("span",[t._v(t._s(this.tableData2.length))])])]),i("el-tabs",{staticClass:"record",attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"待标记",name:"first"}},[i("el-table",{staticClass:"diatable",attrs:{data:t.tableData.slice((t.currentPage2-1)*t.pageSize2,t.currentPage2*t.pageSize2),stripe:"","tooltip-effect":"light","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"max-height":"50vh"}},[i("template",{slot:"empty"},[t.emptytxt?i("img",{attrs:{src:a("2b8b")}}):t._e()]),i("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"序号",width:"50px"}}),i("el-table-column",{attrs:{prop:"guid",label:"设备ID"}}),i("el-table-column",{attrs:{prop:"name",label:"别名"}}),i("el-table-column",{attrs:{prop:"deviceName",label:"设备名称"}}),i("el-table-column",{attrs:{prop:"venderName",label:"供应商名称"}}),i("el-table-column",{attrs:{prop:"isMarked",label:"标记状态"}},[[i("img",{staticStyle:{"vertical-align":"top"},attrs:{src:a("b789"),alt:""}}),t._v(" "),i("span",[t._v("未标记")])]],2),i("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"saveBtn",attrs:{size:"small"},on:{click:function(a){return t.sign(e.row)}}},[t._v("标记")])]}}])})],2),i("el-pagination",{staticClass:"paging",attrs:{align:"right","current-page":t.currentPage2,"page-sizes":[10,20],"page-size":t.pageSize2,layout:"total, prev, pager, next, jumper",total:t.total2},on:{"size-change":t.handleSizeChange2,"current-change":t.handleCurrentChange2}})],1),i("el-tab-pane",{attrs:{label:"已标记",name:"second"}},[i("el-table",{staticClass:"diatable",attrs:{data:t.tableData2.slice((t.currentPage3-1)*t.pageSize3,t.currentPage3*t.pageSize3),stripe:"","tooltip-effect":"light","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"row-key":"num","cell-style":{color:"rgba(0, 0, 0, 0.9)"},"max-height":"50vh"}},[i("template",{slot:"empty"},[t.emptytxt2?i("img",{attrs:{src:a("2b8b")}}):t._e()]),i("el-table-column",{attrs:{type:"index",index:t.indexMethod2,label:"序号",width:"50px"}}),i("el-table-column",{attrs:{prop:"guid",label:"设备ID"}}),i("el-table-column",{attrs:{prop:"name",label:"别名"}}),i("el-table-column",{attrs:{prop:"deviceName",label:"设备名称"}}),i("el-table-column",{attrs:{prop:"venderName",label:"供应商名称"}}),i("el-table-column",{attrs:{prop:"isMarked",label:"标记状态"}},[[i("img",{staticStyle:{"vertical-align":"top"},attrs:{src:a("8a3c"),alt:""}}),t._v(" "),i("span",[t._v("已标记")])]],2),i("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"saveBtn",attrs:{size:"small"},on:{click:function(a){return t.editOthername(e.row)}}},[t._v("修改别名")]),i("el-button",{staticClass:"certainBtn",attrs:{size:"small"},on:{click:function(a){return t.recover(e.row)}}},[t._v("恢复")])]}}])})],2),i("el-pagination",{staticClass:"paging",attrs:{align:"right","current-page":t.currentPage3,"page-sizes":[10,20],"page-size":t.pageSize3,layout:"total, prev, pager, next, jumper",total:t.total3},on:{"size-change":t.handleSizeChange3,"current-change":t.handleCurrentChange3}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-row",[i("el-col",{attrs:{span:16}},[i("div",{staticClass:"tipText"},[t._v("进行恢复操作需要重新插拔U盘")])]),i("el-col",{attrs:{span:8}},[i("el-button",{staticClass:"canBtn",attrs:{size:"small"},on:{click:t.diaClose}},[t._v("取 消")])],1)],1)],1),i("mark-equipment",{ref:"sign",on:{success:t.signSuccess}}),i("edit-othername",{ref:"edit",on:{success:t.editSuccess}}),i("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible1,width:"30%",top:"30vh","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible1=e}}},[i("div",{staticStyle:{"text-align":"center","font-size":"18px",margin:"20px 0",color:"#000"}},[i("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:a("90eb"),alt:""}}),t._v(" 您确定要恢复标记前初始状态吗？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible1=!1}}},[t._v("取 消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)])],1)},g=[],b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"标记设备",width:"30%",visible:t.dialogFormVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.diaClose}},[a("el-form",{ref:"ruleForm",attrs:{"label-position":t.labelPosition,"label-width":"100px",rules:t.rules,model:t.ruleForm,size:"small"}},[a("el-form-item",{attrs:{prop:"name",label:"别名："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{clearable:"",placeholder:"请输入别名"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),a("el-form-item",[a("div",{staticClass:"tips"},[t._v("注：标记后生成设备ID号")])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"canBtn",attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"sureBtn",attrs:{size:"small",disabled:t.btnvalue1},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确定")])],1)],1)},v=[],A=(a("b0c0"),{name:"CreateTemplate",data:function(){return{btnvalue1:!1,dialogFormVisible:!1,labelPosition:"right",rules:{name:[{required:!0,message:"请输入别名",trigger:"blur"}]},ruleForm:{name:""},guid:""}},methods:{diaOpen:function(t){var e=this;this.guid=t.guid,this.ruleForm.name="",this.dialogFormVisible=!0,this.btnvalue1=!1,e.$nextTick((function(){e.$refs.ruleForm.clearValidate()}))},diaClose:function(){var t=this;t.dialogFormVisible=!1},submitForm:function(t){var e=this,a=this;a.$refs[t].validate((function(t){if(!t)return a.btnvalue1=!1,!1;a.btnvalue1=!0;var i={guid:e.guid,name:e.ruleForm.name};Object(s["a"])({url:"/markUdisk",data:i,method:"post"}).then((function(t){var e=t.data;0===e.status?(a.$message({message:"标记成功!",type:"success",showClose:!0}),a.dialogFormVisible=!1,a.$emit("success")):a.btnvalue1=!1}))}))},resetForm:function(t){var e=this;e.$refs[t].resetFields()}}}),w=A,y=(a("2e7f"),Object(m["a"])(w,b,v,!1,null,null,null)),x=y.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"标记设备",width:"30%",visible:t.dialogFormVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.diaClose}},[a("el-form",{ref:"ruleForm",attrs:{"label-position":t.labelPosition,"label-width":"100px",rules:t.rules,model:t.ruleForm,size:"small"}},[a("el-form-item",{attrs:{prop:"name",label:"别名："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{clearable:"",placeholder:"请输入别名"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"canBtn",attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"sureBtn",attrs:{size:"small",disabled:t.btnvalue1},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确定")])],1)],1)},S=[],k={name:"CreateTemplate",data:function(){return{btnvalue1:!1,dialogFormVisible:!1,labelPosition:"right",rules:{name:[{required:!0,message:"请输入别名",trigger:"blur"}]},ruleForm:{name:""},guid:""}},methods:{diaOpen:function(t){var e=this;this.guid=t.guid,this.ruleForm.name="",this.dialogFormVisible=!0,this.btnvalue1=!1,e.$nextTick((function(){e.$refs.ruleForm.clearValidate()}))},diaClose:function(){var t=this;t.dialogFormVisible=!1},submitForm:function(t){var e=this,a=this;a.$refs[t].validate((function(t){if(!t)return a.btnvalue1=!1,!1;a.btnvalue1=!0;var i={guid:e.guid,name:e.ruleForm.name};Object(s["a"])({url:"/markUdisk",data:i,method:"post"}).then((function(t){var e=t.data;0===e.status?(a.$message({message:"修改别名成功!",type:"success",showClose:!0}),a.dialogFormVisible=!1,a.$emit("success")):a.btnvalue1=!1}))}))},resetForm:function(t){var e=this;e.$refs[t].resetFields()}}},F=k,D=(a("b313"),Object(m["a"])(F,C,S,!1,null,null,null)),z=D.exports,V={name:"ConfigPop",components:{MarkEquipment:x,EditOthername:z},data:function(){return{dialogFormVisible:!1,dialogVisible1:!1,ip:"",activeName:"first",emptytxt:"",tableData:[{name:"1"}],currentPage2:1,total2:0,pageSize2:10,nodeId:"",emptytxt2:"",tableData2:[{name:"1"}],currentPage3:1,total3:0,pageSize3:10,guid:"",autorefresh:""}},methods:{diaOpen:function(t){console.log(t);this.dialogFormVisible=!0,this.activeName="first",this.ip=t.ip,this.emptytxt="",this.emptytxt2="",this.tableData=[],this.tableData2=[],this.nodeId=t.nodeId,this.loadData()},diaClose:function(){var t=this;t.dialogFormVisible=!1},loadData:function(){var t=this;Object(s["a"])({url:"/getOnlineUdisk?node_id="+this.nodeId,method:"post"}).then((function(e){var a=e.data;0==a.status&&t.initData()}))},initData:function(){var t=this,e=0;t.autorefresh=setInterval((function(){e++,t.loadOnlineData(),e>5&&clearInterval(t.autorefresh)}),2e3)},loadOnlineData:function(){var t=this;Object(s["a"])({url:"/searchOnlineUdiskInfo?node_id="+this.nodeId,method:"post"}).then((function(e){var a=e.data;a.data&&(t.tableData=a.data.filter((function(t){return 0==t.isMarked})),t.tableData2=a.data.filter((function(t){return 1==t.isMarked})),t.total2=t.tableData.length,t.total3=t.tableData2.length,clearInterval(t.autorefresh)),0==a.total2?t.emptytxt=!0:t.emptytxt=!1,0==a.total3?t.emptytxt2=!0:t.emptytxt2=!1}))},indexMethod:function(t){return 1===this.currentPage2?t<9?"0"+(t+1):t+1:t+1+this.pageSize2*(this.currentPage2-1)},handleSizeChange2:function(t){this.pageSize2=t},handleCurrentChange2:function(t){this.currentPage2=t},sign:function(t){this.$refs.sign.diaOpen(t)},signSuccess:function(){this.initData()},indexMethod2:function(t){return 1===this.currentPage3?t<9?"0"+(t+1):t+1:t+1+this.pageSize3*(this.currentPage3-1)},handleSizeChange3:function(t){this.pageSize3=t},handleCurrentChange3:function(t){this.currentPage3=t},editOthername:function(t){this.$refs.edit.diaOpen(t)},editSuccess:function(){this.initData()},recover:function(t){this.dialogVisible1=!0,this.guid=t.guid},submit:function(){},confirm:function(){var t=this,e={guid:this.guid};Object(s["a"])({url:"/recoverUdisk",data:e,method:"post"}).then((function(e){var a=e.data;0===a.status?(t.$message({message:"操作成功!",type:"success",showClose:!0}),t.dialogVisible1=!1,t.loadData()):t.btnvalue1=!1}))}},destroyed:function(){clearInterval(this.autorefresh)}},I=V,_=(a("6bd2"),a("8466"),Object(m["a"])(I,f,g,!1,null,"3c0c3229",null)),O=_.exports,U={name:"UsbPolicy",components:{ConfigUsb:h,CheckOnline:O},data:function(){return{loading:!1,formInline:{terminalName:"",startDate:"",endDate:""},advancedSearch:!0,advancedFlag:!1,emptytxt:"",terminalData:[],orderBy:"",currentPage:1,total:0,pageSize:10,pageShow:!0,autorefresh:""}},created:function(){Object(r["b"])(this.searchData)},mounted:function(){this.loadData()},beforeDestroy:function(){document.onkeydown=null},methods:{handleClick:function(t,e){},loadData:function(){var t=this;this.loading=!0,Object(s["a"])({url:"/searchOpolicyStatus",method:"post",data:{condition:this.formInline.terminalName,firstTime:this.formInline.startDate,lastTime:this.formInline.endDate,orderBy:this.orderBy,searchPage:this.currentPage,searchSize:this.pageSize}}).then((function(e){var a=e.data;t.loading=!1,a.list&&(a.list.map((function(t,e){t.creat_date=Object(n["a"])(t.creat_date)})),t.terminalData=a.list,t.total=a.total),0==a.total?t.emptytxt=!0:t.emptytxt=!1}))},statusVal:function(t){var e=this.$createElement,a="";if(0==t.udiskStatus)a=e("span",{class:"wathet"},["配置中"]);else if(1==t.udiskStatus)a=e("span",{class:"green"},["已配置"]);else if(2==t.udiskStatus){var i=Object(r["a"])(t.udiskRes);a=i?e("span",{class:"red"},["配置失败（",i,"）"]):t.udiskRes?e("span",{class:"red"},["配置失败（错误码：",t.udiskRes,"）"]):e("span",{class:"red"},["配置失败"])}else a=e("span",{class:"grey"},["初始化状态"]);return a},switchBtn:function(){this.advancedSearch=!this.advancedSearch,this.advancedFlag=!this.advancedFlag},searchData:function(){var t=this;this.currentPage=1,this.loadData(),this.pageShow=!1,this.$nextTick((function(){t.pageShow=!0}))},indexMethod:function(t){return 1===this.currentPage?t<9?"0"+(t+1):t+1:t+1+this.pageSize*(this.currentPage-1)},sortChange:function(t,e,a){a=t.prop.replace(/([A-Z])/g,"_$1").toLowerCase();"ascending"==t.order?this.orderBy=a:this.orderBy=a+" desc",this.loadData()},handleSizeChange:function(t){var e=this;this.currentPage=1,this.pageSize=t,this.pageShow=!1,this.$nextTick((function(){e.pageShow=!0})),this.loadData()},handleCurrentChange:function(t){this.currentPage=t,this.loadData()},configUsb:function(t){0==t.onlineStatus?this.$message({message:"终端已离线",type:"error",showClose:!0}):this.$refs.usb.diaOpen(t)},checkOnline:function(t){0==t.onlineStatus?this.$message({message:"终端已离线",type:"error",showClose:!0}):this.$refs.online.diaOpen(t)},initData:function(){var t=this,e=0;t.autorefresh=setInterval((function(){e++,t.loadData(),e>4&&clearInterval(t.autorefresh)}),2e3)},resetForm:function(){this.formInline.endDate="",this.formInline=Object.assign({},void 0),this.$refs.formInline.resetFields()}},destroyed:function(){clearInterval(this.autorefresh)}},B=U,N=(a("8ff6"),Object(m["a"])(B,i,l,!1,null,"f65163ce",null));e["default"]=N.exports},eaed0:function(t,e,a){"use strict";a("e0fb")}}]);
//# sourceMappingURL=chunk-5c2dc84f.7edc8926.js.map