{"version":3,"sources":["webpack:///./src/views/assetManage/LicenseManage/LicenseAuthorize.vue?89d9","webpack:///./src/views/assetManage/LicenseManage/pop/ImportLicense.vue?6011","webpack:///src/views/assetManage/LicenseManage/pop/ImportLicense.vue","webpack:///./src/views/assetManage/LicenseManage/pop/ImportLicense.vue?6273","webpack:///./src/views/assetManage/LicenseManage/pop/ImportLicense.vue","webpack:///./src/views/assetManage/LicenseManage/pop/AddLicense.vue?7f59","webpack:///src/views/assetManage/LicenseManage/pop/AddLicense.vue","webpack:///./src/views/assetManage/LicenseManage/pop/AddLicense.vue?9b56","webpack:///./src/views/assetManage/LicenseManage/pop/AddLicense.vue","webpack:///src/views/assetManage/LicenseManage/LicenseAuthorize.vue","webpack:///./src/views/assetManage/LicenseManage/LicenseAuthorize.vue?5890","webpack:///./src/views/assetManage/LicenseManage/LicenseAuthorize.vue","webpack:///./src/views/assetManage/LicenseManage/LicenseAuthorize.vue?53da","webpack:///./src/views/assetManage/LicenseManage/pop/AddLicense.vue?a63f","webpack:///./src/views/assetManage/LicenseManage/pop/ImportLicense.vue?86f4"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","ref","formInline","nativeOn","$event","preventDefault","model","value","callback","$$v","$set","expression","directives","name","rawName","advancedSearch","on","resetForm","searchData","advancedFlag","switchBtn","staticStyle","importLicense","addLicense","licenseData","height","color","padding","sortChange","slot","indexMethod","scopedSlots","_u","key","fn","props","row","license_type","_e","status","scope","exportData","delData","currentPage","sync","pageSize","total","handleSizeChange","handleCurrentChange","addSuccess","staticRenderFns","dialogFormVisible","diaclose","labelPosition","rules","ruleForm","uploadFile","beforeUpload","url","fileList","changefile","successUpload","errorUpload","progressUpload","getdaytime","data","btnf1","file","loadingInstance","uploadmessage","methods","that","form","FormData","append","content","method","res","response","close","$message","$refs","upload","clearFiles","$emit","errormessage","uploaddialog","$notify","success","splice","length","push","formName","validate","valid","$loading","body","lock","text","submit","resetFields","diaOpen","$nextTick","component","searchTableData","tableData2","filter","ip","includes","handleSelectionChange","handleLicenseType","handleValidDays","_n","submitForm","validatePass","reg","Error","search","filterText","zdname","valid_days","titles2","defaultProps","children","label","terminalSelection","nodeId","i","datas","node_ids","JSON","stringify","val","orderBy","online_status","searchPage","searchSize","list","clearValidate","terminalTable","clearSelection","components","loading","terminalName","startDate","endDate","emptytxt","pageShow","autorefresh","created","mounted","loadData","beforeDestroy","document","onkeydown","condition","firstTime","lastTime","map","license_create_time","license_req_time","license_authorize_time","effect_time","index","column","prop","num","setInterval","clearInterval","ab2str","b","Blob","u","r","FileReader","readAsText","onload","closeAll","$confirm","confirmButtonText","cancelButtonText","type","str","indexOf","json","parse","createElement","elink","style","display","href","URL","createObjectURL","blob","setAttribute","appendChild","click","revokeObjectURL","removeChild","param","id","Object","assign","undefined","destroyed"],"mappings":"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","file":"js/chunk-618bbcb0.9ff55c17.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"topNav\"},[_c('el-breadcrumb',{staticClass:\"breadNav\",attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{staticClass:\"crumb1\"},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',{staticClass:\"crumb1\"},[_vm._v(\"系统设置\")]),_c('el-breadcrumb-item',{staticClass:\"crumb2\"},[_vm._v(\"License授权\")])],1)],1),_c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"search\"},[_c('el-form',{ref:\"formInline\",staticClass:\"formInline\",attrs:{\"inline\":true,\"label-position\":\"right\",\"label-width\":\"145px\",\"model\":_vm.formInline,\"size\":\"small\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{attrs:{\"label\":\"终端名称/网络地址：\",\"prop\":\"terminalName\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入终端名称/网络地址\",\"oninput\":\"value=value.replace(/[%]/g, '')\"},model:{value:(_vm.formInline.terminalName),callback:function ($$v) {_vm.$set(_vm.formInline, \"terminalName\", $$v)},expression:\"formInline.terminalName\"}})],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.advancedSearch==true),expression:\"advancedSearch==true\"}],attrs:{\"label\":\"日期：\",\"prop\":\"startDate\"}},[_c('el-date-picker',{attrs:{\"value-format\":\"yyyy-MM-dd\",\"editable\":false,\"type\":\"date\",\"placeholder\":\"选择开始时间\"},model:{value:(_vm.formInline.startDate),callback:function ($$v) {_vm.$set(_vm.formInline, \"startDate\", $$v)},expression:\"formInline.startDate\"}}),_vm._v(\" \"),_c('span',{},[_vm._v(\"至\")]),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"value-format\":\"yyyy-MM-dd\",\"editable\":false,\"type\":\"date\",\"placeholder\":\"选择结束时间\"},model:{value:(_vm.formInline.endDate),callback:function ($$v) {_vm.$set(_vm.formInline, \"endDate\", $$v)},expression:\"formInline.endDate\"}})],1),_c('el-form-item',{staticClass:\"advancedBtn\"},[_c('el-button',{staticClass:\"resetBtn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.resetForm}},[_vm._v(\"重置\")]),_c('el-button',{staticClass:\"searchBtn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.searchData}},[_vm._v(\"查询\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.advancedFlag==true),expression:\"advancedFlag==true\"}],staticClass:\"gaoji\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.switchBtn}},[_vm._v(\"展开\"),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\",staticStyle:{\"font-weight\":\"bold\"}})]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.advancedFlag==false),expression:\"advancedFlag==false\"}],staticClass:\"gaoji\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.switchBtn}},[_vm._v(\"收起\"),_c('i',{staticClass:\"el-icon-arrow-up el-icon--right\",staticStyle:{\"font-weight\":\"bold\"}})])],1)],1)],1),_c('div',{staticClass:\"mainContainer\"},[_c('div',{staticClass:\"tableTitle\"},[_vm._v(\"授权列表\")]),_c('div',{staticClass:\"popBtn\"},[_c('el-button',{staticClass:\"operateBtn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.importLicense}},[_vm._v(\"导入\")]),_c('el-button',{staticClass:\"operateBtn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.addLicense}},[_vm._v(\"新建\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"licenseTable\",staticStyle:{\"width\":\"99.9%\",\"font-size\":\"14px\"},attrs:{\"data\":_vm.licenseData,\"size\":\"mini\",\"tooltip-effect\":\"light\",\"element-loading-text\":\"加载中，请稍后\",\"header-cell-style\":{height: '48px','background-color': '#F0F2F5',color: 'rgba(0, 0, 0, 0.72)',padding:'0px'},\"cell-style\":{color: 'rgba(0, 0, 0, 0.9)'},\"fit\":true},on:{\"sort-change\":_vm.sortChange}},[_c('template',{slot:\"empty\"},[_c('div',[_vm._v(\"暂无数据\")])]),_c('el-table-column',{attrs:{\"type\":\"index\",\"index\":_vm.indexMethod,\"label\":\"序号\",\"width\":\"50px\"}}),_c('el-table-column',{attrs:{\"prop\":\"node_name\",\"label\":\"终端名称\",\"min-width\":\"100%\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"node_ip\",\"label\":\"网络地址\",\"min-width\":\"100%\"}}),_c('el-table-column',{attrs:{\"prop\":\"license_name\",\"label\":\"授权名称\",\"min-width\":\"170%\"}}),_c('el-table-column',{attrs:{\"prop\":\"license_type\",\"label\":\"授权类型\",\"min-width\":\"100%\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [(props.row.license_type == '2')?_c('span',[_vm._v(\"基础版\")]):(props.row.license_type == '3')?_c('span',[_vm._v(\"扩展版\")]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"prop\":\"license_create_time\",\"label\":\"创建时间\",\"min-width\":\"110%\",\"sortable\":\"custom\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"license_req_time\",\"label\":\"上报时间\",\"min-width\":\"110%\"}}),_c('el-table-column',{attrs:{\"prop\":\"license_authorize_name\",\"label\":\"授权文件名称\",\"min-width\":\"110%\"}}),_c('el-table-column',{attrs:{\"prop\":\"license_authorize_time\",\"label\":\"授权导入时间\",\"min-width\":\"115%\"}}),_c('el-table-column',{attrs:{\"prop\":\"effect_time\",\"label\":\"生效时间\",\"min-width\":\"115%\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"min-width\":\"100%\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [(props.row.status == '0')?_c('span',[_vm._v(\"创建和下发请求\")]):(props.row.status == '1')?_c('span',[_vm._v(\"获取license请求\")]):(props.row.status == '2')?_c('span',[_vm._v(\"导出license请求\")]):(props.row.status == '3')?_c('span',[_vm._v(\"授权策略下发\")]):(props.row.status == '4')?_c('span',[_vm._v(\"已授权\")]):(props.row.status == '5')?_c('span',[_vm._v(\"授权失败\")]):(props.row.status == '6')?_c('span',[_vm._v(\"获取license请求验签失败\")]):_c('span',{staticClass:\"grey\"},[_vm._v(\"初始化状态\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"valid_days\",\"label\":\"有效期（天）\",\"min-width\":\"100%\"}}),_c('el-table-column',{attrs:{\"width\":\"100px\",\"label\":\"操作\",\"align\":\"center\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status == '1' || scope.row.status == '2')?_c('el-button',{staticStyle:{\"color\":\"#1ac492\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.exportData(scope.row)}}},[_vm._v(\"导出\")]):_c('el-button',{attrs:{\"disabled\":\"\",\"type\":\"text\"}},[_vm._v(\"导出\")]),(scope.row.status != '4')?_c('el-button',{staticStyle:{\"color\":\"#FF4D4F\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.delData(scope.row)}}},[_vm._v(\"删除\")]):_c('el-button',{attrs:{\"disabled\":\"\",\"type\":\"text\"}},[_vm._v(\"删除\")])]}}])})],2),(_vm.pageShow)?_c('el-pagination',{staticClass:\"paging\",attrs:{\"align\":\"right\",\"current-page\":_vm.currentPage.sync,\"page-sizes\":[10,20],\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next, sizes, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}):_vm._e()],1)])]),_c('import-license',{ref:\"importLicense\",on:{\"deliveData\":_vm.addSuccess}}),_c('add-license',{ref:\"addLicense\",on:{\"newsuccess\":_vm.addSuccess}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":\"导入LICENSE文件\",\"width\":\"30%\",\"visible\":_vm.dialogFormVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event},\"closed\":_vm.diaclose}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"label-position\":_vm.labelPosition,\"label-width\":\"125px\",\"rules\":_vm.rules,\"model\":_vm.ruleForm,\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"LICENSE文件：\",\"prop\":\"file\"}},[_c('el-input',{staticClass:\"fileLabel\",staticStyle:{\"float\":\"left\"},attrs:{\"type\":\"text\",\"placeholder\":\"请选择.license文件\",\"disabled\":true},model:{value:(_vm.ruleForm.file),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"file\", $$v)},expression:\"ruleForm.file\"}}),_c('el-upload',{ref:\"upload\",attrs:{\"http-request\":_vm.uploadFile,\"before-upload\":_vm.beforeUpload,\"show-file-list\":false,\"name\":\"file\",\"accept\":\".license\",\"action\":_vm.url,\"file-list\":_vm.fileList,\"on-change\":_vm.changefile,\"auto-upload\":false,\"on-success\":_vm.successUpload,\"on-error\":_vm.errorUpload,\"on-progress\":_vm.progressUpload}},[_c('el-button',{staticClass:\"llbdwj\"},[_vm._v(\"浏览本地文件\")])],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"canBtn\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),(_vm.btnf1)?_c('el-button',{staticClass:\"sureBtn\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.getdaytime('ruleForm')}}},[_vm._v(\"确定\")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog title=\"导入LICENSE文件\" width=\"30%\" :visible.sync=\"dialogFormVisible\" @closed=\"diaclose\" :close-on-click-modal=\"false\">\r\n    <el-form :label-position=\"labelPosition\" label-width=\"125px\" :rules=\"rules\" :model=\"ruleForm\" ref=\"ruleForm\" size=\"small\">\r\n      <el-form-item label=\"LICENSE文件：\" prop=\"file\">\r\n        <el-input class=\"fileLabel\" style=\"float: left\" type=\"text\" v-model=\"ruleForm.file\" placeholder=\"请选择.license文件\" :disabled=\"true\"></el-input>\r\n        <el-upload :http-request=\"uploadFile\" :before-upload=\"beforeUpload\"\r\n          :show-file-list=\"false\" name=\"file\" accept=\".license\" ref=\"upload\" :action=\"url\" :file-list=\"fileList\"\r\n          :on-change=\"changefile\" :auto-upload=\"false\" :on-success=\"successUpload\" :on-error=\"errorUpload\" :on-progress=\"progressUpload\">\r\n          <el-button class=\"llbdwj\">浏览本地文件</el-button>\r\n        </el-upload>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button size=\"small\" class=\"canBtn\" @click=\"dialogFormVisible = false\">取 消</el-button>\r\n      <el-button size=\"small\" class=\"sureBtn\" v-if=\"btnf1\" @click=\"getdaytime('ruleForm')\">确定</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nexport default {\r\n  name: \"ImportLicense\",\r\n  data() {\r\n    return {\r\n      btnf1: true,\r\n      url: \"\",\r\n      dialogFormVisible: false,\r\n      ruleForm: {\r\n        file: \"\",\r\n      },\r\n      rules: {\r\n        file: [{ required: true, message: \"请选择.license格式文件\", trigger: \"change\" },],\r\n      },\r\n      labelPosition: \"right\",\r\n      fileList: [],\r\n      loadingInstance: \"\",\r\n      uploadmessage: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    uploadFile(content) {\r\n      var that = this;\r\n      var form = new FormData();\r\n      form.append(\"file\", content.file);\r\n      request({\r\n        url: that.url,\r\n        method: \"post\",\r\n        data: form,\r\n      }).then((response) => {\r\n        var res = response.data\r\n        if (res.status === 0) {\r\n          that.loadingInstance.close();\r\n          that.uploadmessage = \"\";\r\n          that.$message({ message: \"导入成功!\", type: \"success\",showClose: true,});\r\n          that.$refs.upload.clearFiles();\r\n          that.dialogFormVisible = false;\r\n          that.$emit(\"deliveData\");\r\n        } else {\r\n          that.loadingInstance.close();\r\n          that.btnf1 = true;\r\n          // that.$message({message: res.errormessage,type: \"error\", duration: 0,showClose: true, });\r\n          that.uploadmessage = res.errormessage;\r\n        }\r\n      });\r\n    },\r\n    beforeUpload(file, fileList) {},\r\n    uploaddialog() {\r\n      var that = this;\r\n      that.dialogFormVisible = true;\r\n    },\r\n    errorUpload(response, file, fileList) {},\r\n    successUpload(response, file, fileList) {\r\n      var that = this;\r\n      that.$notify.success({ title: \"成功\", message: \"文件上传成功\",});\r\n    },\r\n    progressUpload(response, file, fileList) {},\r\n    changefile(file, fileList) {\r\n      var that = this;\r\n      that.uploadmessage = \"\";\r\n      that.fileList.splice(0, that.fileList.length);\r\n      that.ruleForm.file = file.name;\r\n      that.fileList.push(fileList[fileList.length - 1]);\r\n    },\r\n    getdaytime(formName) {\r\n      var that = this;\r\n      that.btnf1 = false;\r\n      that.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if (that.uploadmessage === \"\") {\r\n            that.loadingInstance = that.$loading({\r\n              body: true,\r\n              lock: true,\r\n              text: \"正在上传,请耐心等待,不要刷新页面!\",\r\n            });\r\n            that.$refs.upload.submit();\r\n            that.$refs.upload.clearFiles();\r\n          } else {\r\n            that.btnf1 = true;\r\n          }\r\n        } else {\r\n          that.btnf1 = true;\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    resetForm(formName) {\r\n      var that = this;\r\n      that.$refs[formName].resetFields();\r\n      that.$refs.upload.clearFiles();\r\n    },\r\n    diaOpen() {\r\n      var that = this;\r\n      that.dialogFormVisible = true;\r\n      that.btnf1 = true;\r\n      that.ruleForm.file = \"\";\r\n      that.url = \"/sys/importLTpcmAuthorize\";\r\n      that.$nextTick(function () {\r\n        that.$refs.upload.clearFiles();\r\n        that.$refs[\"ruleForm\"].resetFields();\r\n      });\r\n    },\r\n    diaclose() {\r\n      var that = this;\r\n      that.dialogFormVisible = false;\r\n      that.$refs.upload.clearFiles();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-input {\r\n  width: 60%;\r\n}\r\n.formItem .el-select {\r\n  float: left;\r\n}\r\n.formItem .el-input {\r\n  float: left;\r\n}\r\n.dialog-footer .sureBtn {\r\n  background-color: #1ac492!important;\r\n  border: none;\r\n  border: 1px solid #1ac492!important;\r\n  color: #fff;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportLicense.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportLicense.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImportLicense.vue?vue&type=template&id=7505c17b&scoped=true&\"\nimport script from \"./ImportLicense.vue?vue&type=script&lang=js&\"\nexport * from \"./ImportLicense.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImportLicense.vue?vue&type=style&index=0&id=7505c17b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7505c17b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":\"新建\",\"top\":\"10vh\",\"width\":\"30%\",\"visible\":_vm.dialogFormVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event},\"closed\":_vm.diaclose}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"label-position\":_vm.labelPosition,\"label-width\":\"100px\",\"rules\":_vm.rules,\"model\":_vm.ruleForm,\"size\":\"small\"}},[_c('div',{staticClass:\"itemw\"},[_c('el-form-item',{staticClass:\"zdclass\",attrs:{\"prop\":\"zdname\",\"label\":\"终端信息：\"}},[_c('div',{staticClass:\"searchinputdiv\"},[_c('el-input',{staticStyle:{\"width\":\"50%\"},attrs:{\"placeholder\":\"搜索IP\",\"clearable\":\"\"},model:{value:(_vm.searchTableData),callback:function ($$v) {_vm.searchTableData=$$v},expression:\"searchTableData\"}})],1),_c('el-table',{ref:\"terminalTable\",staticClass:\"tableStyle\",attrs:{\"row-key\":\"nodeId\",\"size\":\"small\",\"height\":_vm.height,\"header-cell-style\":{'background-color': '#F0F2F5',padding:'0px'},\"cell-style\":{color: 'rgba(0, 0, 0, 0.9)'},\"data\":_vm.tableData2.filter(function (data) { return !_vm.searchTableData || data.ip.includes(_vm.searchTableData); })},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"reserve-selection\":\"\",\"type\":\"selection\",\"width\":\"50\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"50px\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"终端名称\",\"show-overflow-tooltip\":true,\"min-width\":\"100%\"}}),_c('el-table-column',{attrs:{\"prop\":\"ip\",\"label\":\"网络地址\",\"min-width\":\"60%\"}})],1)],1),_c('el-form-item',{staticClass:\"formItem\",attrs:{\"prop\":\"license_type\",\"label\":\"类型：\"}},[_c('el-radio-group',{on:{\"change\":_vm.handleLicenseType},model:{value:(_vm.ruleForm.license_type),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"license_type\", $$v)},expression:\"ruleForm.license_type\"}},[_c('el-radio',{attrs:{\"label\":'2'}},[_vm._v(\"基础版\")]),_c('el-radio',{attrs:{\"label\":'3'}},[_vm._v(\"扩展版\")])],1)],1),_c('el-form-item',{staticClass:\"formItem\",attrs:{\"prop\":\"valid_days\",\"label\":\"有效期：\"}},[_c('el-input',{staticStyle:{\"width\":\"70%\"},attrs:{\"clearable\":\"\",\"placeholder\":\"请输入30-3650之间的数字\",\"name\":\"valid_days\",\"type\":\"number\"},on:{\"change\":_vm.handleValidDays},model:{value:(_vm.ruleForm.valid_days),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"valid_days\", _vm._n($$v))},expression:\"ruleForm.valid_days\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"天\")])],1)],1)]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"canBtn\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{staticClass:\"sureBtn\",attrs:{\"size\":\"small\",\"disabled\":_vm.btnf1},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"确定\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!--新建开始-->\r\n  <el-dialog title=\"新建\" top=\"10vh\" width=\"30%\" :visible.sync=\"dialogFormVisible\" @closed=\"diaclose\" :close-on-click-modal=\"false\">\r\n    <el-form :label-position=\"labelPosition\" label-width=\"100px\" :rules=\"rules\" :model=\"ruleForm\" ref=\"ruleForm\" size=\"small\">\r\n      <div class=\"itemw\">\r\n        <el-form-item class=\"zdclass\" prop=\"zdname\" label=\"终端信息：\">\r\n          <div class=\"searchinputdiv\">\r\n            <el-input style=\"width:50%\" v-model=\"searchTableData\" placeholder=\"搜索IP\" clearable></el-input>\r\n          </div>\r\n          <el-table row-key=\"nodeId\" ref=\"terminalTable\" size=\"small\" :height=\"height\" @selection-change=\"handleSelectionChange\"  class=\"tableStyle\"\r\n             :header-cell-style=\"{'background-color': '#F0F2F5',padding:'0px'}\" :cell-style=\"{color: 'rgba(0, 0, 0, 0.9)'}\"\r\n             :data=\"tableData2.filter(data => !searchTableData || data.ip.includes(searchTableData))\">\r\n            <el-table-column reserve-selection type=\"selection\" width=\"50\" align=\"center\"></el-table-column>\r\n            <el-table-column type=\"index\" label=\"序号\" width=\"50px\"></el-table-column>\r\n            <el-table-column prop=\"name\" label=\"终端名称\" :show-overflow-tooltip=\"true\" min-width=\"100%\"></el-table-column>\r\n            <el-table-column prop=\"ip\" label=\"网络地址\" min-width=\"60%\"></el-table-column>\r\n          </el-table>\r\n        </el-form-item>\r\n        <el-form-item class=\"formItem\" prop=\"license_type\" label=\"类型：\">\r\n          <el-radio-group v-model=\"ruleForm.license_type\" @change=\"handleLicenseType\">\r\n            <el-radio :label=\"'2'\">基础版</el-radio>\r\n            <el-radio :label=\"'3'\">扩展版</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item class=\"formItem\" prop=\"valid_days\" label=\"有效期：\">\r\n          <el-input style=\"width:70%\" v-model.number=\"ruleForm.valid_days\" clearable @change=\"handleValidDays\"\r\n            placeholder=\"请输入30-3650之间的数字\" name=\"valid_days\" type=\"number\"></el-input>\r\n            &nbsp;&nbsp;<span>天</span>\r\n        </el-form-item>\r\n      </div>\r\n    </el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button size=\"small\" class=\"canBtn\" @click=\"dialogFormVisible = false\">取 消</el-button>\r\n      <el-button size=\"small\" class=\"sureBtn\" :disabled=\"btnf1\" @click=\"submitForm('ruleForm')\">确定</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nexport default {\r\n  name: \"AddLicense\",\r\n  data() {\r\n    var validatePass = (rule, value, callback) => {\r\n      var reg = /^[0-9]+$/;\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入30-3650之间的整数\"));\r\n      } else if (!reg.test(value)) {\r\n        callback(new Error(\"请输入正整数\"));\r\n      } else if ( parseInt(value) < 30 ) {\r\n        callback(new Error(\"请输入大于30的正整数\"));\r\n      } else if ( parseInt(value) > 3650 ) {\r\n        callback(new Error(\"请输入小于3650的正整数\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      height: 0,\r\n      btnf1: false,\r\n      searchTableData: \"\",\r\n      tableData2: [],\r\n      dialogFormVisible: false,\r\n      labelPosition: \"right\",\r\n      search: \"\",\r\n      filterText: \"\",\r\n      rules: {\r\n        zdname: [{ required: true, message: \"请选择终端\", trigger: \"change\" }],\r\n        license_type: [{ required: true, message: \"请选择类型\", trigger: \"change\" },],\r\n        valid_days: [{ required: true,validator: validatePass,  trigger: \"blur\" },],\r\n      },\r\n      ruleForm: {\r\n        zdname: \"\",\r\n        license_type: \"\",\r\n        valid_days:\"\"\r\n      },\r\n      titles2: [\r\n        { prop: \"name\", label: \"终端名称\",},\r\n        { prop: \"ip\", label: \"网络地址\",},\r\n      ],\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\",\r\n      },\r\n      terminalSelection:[],\r\n      nodeId:[],\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm(formName) {\r\n      var that = this;\r\n      if(that.terminalSelection.length === 0) {\r\n        that.ruleForm.zdname = ''\r\n      } else {\r\n        that.ruleForm.zdname = \"1\";\r\n      }\r\n      that.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          for (var i in that.terminalSelection) {\r\n            that.nodeId.push(that.terminalSelection[i].nodeId)\r\n          }\r\n          var datas = {\r\n            license_type: that.ruleForm.license_type,\r\n            node_ids:that.nodeId,\r\n            valid_days:that.ruleForm.valid_days\r\n          }\r\n          // console.log(datas)\r\n          request({\r\n            url: \"/sys/createLTpcmAuthorize\",\r\n            method: \"post\",\r\n            data: JSON.stringify(datas),\r\n          }).then((response) => {\r\n            var res = response.data\r\n            if (res.status === 0) {\r\n              that.dialogFormVisible = false;\r\n              that.$message({ message: \"操作成功!\",type: \"success\", showClose: true,});\r\n              that.$emit(\"newsuccess\");\r\n            } else {\r\n              that.btnf1 = true;\r\n            }\r\n          });\r\n        } else {\r\n          that.btnf1 = false;\r\n        }\r\n      });\r\n    },\r\n    handleSelectionChange (val) {\r\n      if(val) {\r\n        this.terminalSelection = val\r\n        this.ruleForm.zdname = \"1\"\r\n        this.btnf1 = false;\r\n      }\r\n    },\r\n    handleLicenseType(val) {\r\n      if (val) {\r\n        this.btnf1 = false\r\n      }\r\n    },\r\n    handleValidDays(val) {\r\n      if (val) {\r\n        this.btnf1 = false\r\n      }\r\n    },\r\n    diaOpen() {\r\n      var that = this;\r\n      this.dialogFormVisible = true;\r\n      this.btnf1 = false;\r\n      this.searchTableData = \"\";\r\n      this.ruleForm.license_type = \"\";\r\n      this.ruleForm.valid_days = \"\"\r\n      this.nodeId = [],\r\n      this.terminalSelection=[]\r\n      request({ url: \"/LNodeList\",method: \"post\",\r\n        data: {\r\n          orderBy: \"installer_time desc\",\r\n          // system_type: \"1\",\r\n          online_status: 1,\r\n          searchPage: 1,\r\n          searchSize: 10000,\r\n        },\r\n      }).then((response) => {\r\n        var res = response.data\r\n        that.tableData2 = res.list;\r\n        if (res.total > 5) {\r\n          that.height = 350;\r\n        } else if (res.total === 0) {\r\n          that.height = 110;\r\n        } else {\r\n          that.height = 100 + 42 * res.total;\r\n        }\r\n      });\r\n      that.$nextTick(function () {\r\n        that.$refs.ruleForm.clearValidate();\r\n        that.$refs.terminalTable.clearSelection();\r\n      });\r\n    },\r\n    diaclose() {\r\n      this.dialogFormVisible = false;\r\n      this.terminalSelection =[]\r\n      this.nodeId = []\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.tableStyle {\r\nfont-size:14px;border:1px solid #F0F2F5;margin-top: 10px;\r\n}\r\n.itemw {\r\n  position: relative;\r\n}\r\n/*滚动条*/\r\n.el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLicense.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLicense.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddLicense.vue?vue&type=template&id=93be56aa&scoped=true&\"\nimport script from \"./AddLicense.vue?vue&type=script&lang=js&\"\nexport * from \"./AddLicense.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddLicense.vue?vue&type=style&index=0&id=93be56aa&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"93be56aa\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"main\">\r\n    <div class=\"container\">\r\n      <div class=\"topNav\">\r\n        <el-breadcrumb class=\"breadNav\" separator=\"/\">\r\n          <el-breadcrumb-item class=\"crumb1\">首页</el-breadcrumb-item>\r\n          <el-breadcrumb-item class=\"crumb1\">系统设置</el-breadcrumb-item>\r\n          <el-breadcrumb-item class=\"crumb2\">License授权</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <!-- <div class=\"title\">License授权</div> -->\r\n      </div>\r\n      <div class=\"wrap\">\r\n        <div class=\"search\">\r\n          <el-form :inline=\"true\" label-position=\"right\" label-width=\"145px\"  :model=\"formInline\" ref=\"formInline\" class=\"formInline\" size=\"small\" @submit.native.prevent>\r\n            <el-form-item label=\"终端名称/网络地址：\" prop=\"terminalName\">\r\n              <el-input v-model=\"formInline.terminalName\" clearable placeholder=\"请输入终端名称/网络地址\" oninput=\"value=value.replace(/[%]/g, '')\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"日期：\" prop=\"startDate\" v-show=\"advancedSearch==true\">\r\n              <el-date-picker value-format=\"yyyy-MM-dd\" :editable=\"false\" type=\"date\" placeholder=\"选择开始时间\" v-model=\"formInline.startDate\"></el-date-picker>\r\n              &nbsp;&nbsp;<span class=\"\">至</span>&nbsp;&nbsp;\r\n              <el-date-picker value-format=\"yyyy-MM-dd\" :editable=\"false\" type=\"date\" placeholder=\"选择结束时间\" v-model=\"formInline.endDate\"></el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item class=\"advancedBtn\">\r\n              <el-button class=\"resetBtn\" size=\"small\" @click=\"resetForm\">重置</el-button>\r\n              <el-button class=\"searchBtn\" size=\"small\" @click=\"searchData\">查询</el-button>\r\n              <el-button class=\"gaoji\" size=\"small\" v-show=\"advancedFlag==true\" @click=\"switchBtn\">展开<i class=\"el-icon-arrow-down el-icon--right\" style=\"font-weight: bold;\"></i></el-button>\r\n              <el-button class=\"gaoji\" size=\"small\" v-show=\"advancedFlag==false\" @click=\"switchBtn\">收起<i class=\"el-icon-arrow-up el-icon--right\" style=\"font-weight: bold;\"></i></el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n        <div class=\"mainContainer\">\r\n          <div class=\"tableTitle\">授权列表</div>\r\n          <div class=\"popBtn\">\r\n            <el-button class=\"operateBtn\" size=\"small\" @click=\"importLicense\">导入</el-button>\r\n            <el-button class=\"operateBtn\" size=\"small\" @click=\"addLicense\">新建</el-button>\r\n          </div>\r\n          <el-table :data=\"licenseData\" size=\"mini\" ref=\"licenseTable\" tooltip-effect=\"light\" style=\"width: 99.9%;font-size: 14px\" \r\n            v-loading=\"loading\" element-loading-text=\"加载中，请稍后\"\r\n            :header-cell-style=\"{height: '48px','background-color': '#F0F2F5',color: 'rgba(0, 0, 0, 0.72)',padding:'0px'}\"\r\n            :cell-style=\"{color: 'rgba(0, 0, 0, 0.9)'}\" @sort-change='sortChange'   :fit='true'>\r\n            <template slot=\"empty\">\r\n              <!-- <img style=\"\" v-if=\"emptytxt\" src=\"@/assets/nodata1.png\" /> -->\r\n              <div>暂无数据</div>\r\n            </template>\r\n            <el-table-column type=\"index\" :index=\"indexMethod\" label=\"序号\" width=\"50px\"></el-table-column>\r\n            <el-table-column prop=\"node_name\" label=\"终端名称\" min-width=\"100%\" show-overflow-tooltip></el-table-column>\r\n            <el-table-column prop=\"node_ip\" label=\"网络地址\" min-width=\"100%\"></el-table-column>\r\n            <el-table-column prop=\"license_name\" label=\"授权名称\" min-width=\"170%\"></el-table-column>\r\n            <el-table-column prop=\"license_type\" label=\"授权类型\" min-width=\"100%\">\r\n              <template slot-scope=\"props\">\r\n                <span v-if=\"props.row.license_type == '2'\">基础版</span>\r\n                <span v-else-if=\"props.row.license_type == '3'\">扩展版</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"license_create_time\" label=\"创建时间\" min-width=\"110%\" sortable='custom' show-overflow-tooltip></el-table-column>\r\n            <el-table-column prop=\"license_req_time\" label=\"上报时间\" min-width=\"110%\"></el-table-column>\r\n            <el-table-column prop=\"license_authorize_name\" label=\"授权文件名称\" min-width=\"110%\"></el-table-column>\r\n            <el-table-column prop=\"license_authorize_time\" label=\"授权导入时间\" min-width=\"115%\"></el-table-column>\r\n            <el-table-column prop=\"effect_time\" label=\"生效时间\" min-width=\"115%\"></el-table-column>\r\n            <el-table-column prop=\"status\" label=\"状态\" min-width=\"100%\">\r\n              <template slot-scope=\"props\">\r\n                <span v-if=\"props.row.status == '0'\">创建和下发请求</span>\r\n                <span v-else-if=\"props.row.status == '1'\">获取license请求</span>\r\n                <span v-else-if=\"props.row.status == '2'\">导出license请求</span>\r\n                <span v-else-if=\"props.row.status == '3'\">授权策略下发</span>\r\n                <span v-else-if=\"props.row.status == '4'\">已授权</span>\r\n                <span v-else-if=\"props.row.status == '5'\">授权失败</span>\r\n                <span v-else-if=\"props.row.status == '6'\">获取license请求验签失败</span>\r\n                <span v-else class=\"grey\">初始化状态</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"valid_days\" label=\"有效期（天）\" min-width=\"100%\"></el-table-column>\r\n            <el-table-column width=\"100px\" label=\"操作\" align=\"center\" fixed=\"right\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button style=\"color:#1ac492\" v-if=\"scope.row.status == '1' || scope.row.status == '2'\" @click=\"exportData(scope.row)\" type=\"text\">导出</el-button>\r\n                <el-button v-else disabled type=\"text\">导出</el-button>\r\n                 <el-button style=\"color:#FF4D4F\" v-if=\"scope.row.status != '4'\" @click=\"delData(scope.row)\" type=\"text\">删除</el-button>\r\n                <el-button v-else disabled type=\"text\">删除</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <el-pagination align='right' class=\"paging\" v-if=\"pageShow\"\r\n            @size-change=\"handleSizeChange\" \r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"currentPage.sync\" \r\n            :page-sizes=\"[10,20]\" \r\n            :page-size=\"pageSize\" \r\n            layout=\"total, prev, pager, next, sizes, jumper\" \r\n            :total=\"total\">\r\n          </el-pagination>\r\n        </div>\r\n      </div>\r\n    </div> \r\n    <import-license ref=\"importLicense\" @deliveData=\"addSuccess\"></import-license>  \r\n    <add-license ref=\"addLicense\" @newsuccess=\"addSuccess\"></add-license>  \r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport request from \"@/utils/request\";\r\nimport { timeToZh } from \"@/utils/timefilter\";\r\nimport { handleEnter } from \"@/utils/tools\";\r\nimport ImportLicense from './pop/ImportLicense'\r\nimport AddLicense from './pop/AddLicense'\r\n\r\n\r\nexport default {\r\n  name:\"LicenseAuthorize\",\r\n  components: { ImportLicense,AddLicense },\r\n  data() {\r\n    return {\r\n      loading:false,\r\n      formInline:{\r\n        terminalName: '',\r\n        startDate:'',\r\n        endDate:'',\r\n      },\r\n      advancedSearch:true,\r\n      advancedFlag:false,\r\n      emptytxt:'',\r\n      licenseData:[],\r\n      currentPage: 1, // 当前页码\r\n      total: 0, // 总条数\r\n      pageSize: 10,// 每页的数据条数\r\n      pageShow:true,\r\n      orderBy:'license_create_time desc',\r\n      autorefresh: '',//定时器\r\n    };\r\n  },\r\n  created() {\r\n    handleEnter(this.searchData)\r\n  },\r\n  mounted() {\r\n    this.loadData()\r\n  },\r\n  beforeDestroy() {\r\n    document.onkeydown = null\r\n  },\r\n  methods: {  \r\n    loadData() {\r\n      var that = this\r\n      this.loading = true\r\n      request({url: \"/sys/lTpcmAuthorizeList\",method: \"post\",\r\n        data: {\r\n          condition: this.formInline.terminalName,\r\n          firstTime: this.formInline.startDate,\r\n          lastTime: this.formInline.endDate,\r\n          orderBy: this.orderBy,\r\n          searchPage: this.currentPage,\r\n          searchSize: this.pageSize,\r\n        }\r\n      }).then((response) => {\r\n        var res = response.data\r\n        that.loading = false\r\n        if (res.list) {\r\n          res.list.map(function(value,index) {\r\n            value.license_create_time = timeToZh(value.license_create_time)\r\n            value.license_req_time = timeToZh(value.license_req_time)\r\n            value.license_authorize_time = timeToZh(value.license_authorize_time)\r\n            value.effect_time = timeToZh(value.effect_time)\r\n          })\r\n          that.licenseData = res.list\r\n        }\r\n        that.total = res.total\r\n        if(res.total ==0) {that.emptytxt = true} else { that.emptytxt = false}\r\n      });\r\n    },\r\n    switchBtn() {\r\n      this.advancedSearch = !this.advancedSearch\r\n      this.advancedFlag = !this.advancedFlag  \r\n    },\r\n    indexMethod(index) {\r\n      if (this.currentPage === 1) {\r\n        if(index < 9) {\r\n          return '0' + ( index + 1 )\r\n        } else {\r\n          return index + 1\r\n        }\r\n      } else {\r\n        return ( index + 1 ) + this.pageSize * (this.currentPage - 1)\r\n      }\r\n    },\r\n    sortChange: function(column, prop, order) {\r\n      // console.log(column + '-' + column.prop + '-' + column.order)\r\n      // console.log(column)\r\n      if(column.order==\"ascending\") {\r\n        this.orderBy = column.prop\r\n      } else {\r\n        this.orderBy = column.prop + \" desc\"\r\n      }\r\n      this.loadData()\r\n    },\r\n    searchData() {\r\n      this.currentPage = 1\r\n      this.loadData()\r\n      this.pageShow = false\r\n      this.$nextTick(() => {\r\n        this.pageShow = true\r\n      })\r\n    },\r\n     //每页条数改变时触发 选择一页显示多少行\r\n    handleSizeChange(val) {\r\n      // console.log(`每页 ${val} 条`);\r\n      this.currentPage = 1;\r\n      this.pageSize = val;\r\n      this.pageShow = false\r\n      this.$nextTick(() => {\r\n        this.pageShow = true\r\n      })\r\n      this.loadData()\r\n    },\r\n    //当前页改变时触发 跳转其他页\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`);\r\n      this.currentPage = val;\r\n      this.loadData()\r\n    },\r\n    importLicense() {\r\n      this.$refs.importLicense.diaOpen()\r\n    },\r\n    addLicense() {\r\n      this.$refs.addLicense.diaOpen()\r\n    },\r\n    addSuccess() {\r\n      var that = this;\r\n      var num = 0\r\n      that.autorefresh = setInterval(function () {\r\n        num ++\r\n        that.loadData()\r\n        if (num > 4) {\r\n          clearInterval(that.autorefresh)\r\n        }\r\n      }, 1000);\r\n    },\r\n    ab2str(u,f) {\r\n      var b = new Blob([u]);\r\n      var r = new FileReader();\r\n      r.readAsText(b, 'utf-8');\r\n      r.onload = function (){if(f)f.call(null,r.result)}\r\n    },\r\n    exportData(param){\r\n      // console.info(param)\r\n      var that=this\r\n      that.$message.closeAll()\r\n      this.$confirm(\"确定导出此数据？\",\"提示\", {\r\n        confirmButtonText:\"确定\",\r\n        cancelButtonText:\"取消\",\r\n        type:\"warning\"\r\n      }).then(() => {\r\n      request({url: \"/sys/export_unauthorize_license?id=\" + param.id,method: \"post\",responseType: \"arraybuffer\", }).\r\n        then((response) => {\r\n          var res = response.data\r\n          that.ab2str(res,function(str) {\r\n            // console.log(str)\r\n            if (str.indexOf(\"status\") > -1) {\r\n              var json = JSON.parse(str)\r\n              that.$message({ message: json.errormessage, type: \"error\", showClose: true});\r\n            } else {\r\n              let fileNames = response.headers[\"filename\"]\r\n              const blob = new Blob([res],{type:'application/octet-stream'})\r\n              if ('download' in document.createElement('a')) {\r\n                const elink = document.createElement('a')\r\n                elink.style.display = 'none'\r\n                elink.href = URL.createObjectURL(blob)\r\n                elink.setAttribute('download',fileNames)\r\n                document.body.appendChild(elink)\r\n                elink.click()\r\n                URL.revokeObjectURL(elink.href)\r\n                document.body.removeChild(elink)\r\n              }\r\n            }\r\n          })\r\n        })\r\n      }).catch(res => {})\r\n      \r\n    },\r\n    delData(param) {\r\n      var that = this\r\n      that.$message.closeAll()\r\n      var form = new FormData();\r\n      form.append(\"id\", param.id);\r\n      this.$confirm(\"此操作将永久删除该数据，是否继续？\",\"提示\", {\r\n        confirmButtonText:\"确定\",\r\n        cancelButtonText:\"取消\",\r\n        type:\"warning\"\r\n      }).then(() => {\r\n        request({url: \"/sys/delete_license\",method: \"post\",data:form}).\r\n          then((response) => {\r\n          var res = response.data\r\n          if(res.status == 0) {\r\n            that.$message({ message: \"操作成功!\", type: \"success\", showClose: true,});\r\n            that.addSuccess()\r\n          }else {\r\n            // that.$message({ message: response.errormessage, type: \"error\", duration: 0, showClose: true,});\r\n          }\r\n        })\r\n      }).catch(res => {})\r\n    },\r\n    resetForm (){\r\n      this.formInline.endDate =''\r\n      this.formInline = Object.assign({}, undefined);\r\n      this.$refs.formInline.resetFields();\r\n    }\r\n  },\r\n  destroyed() {\r\n    clearInterval(this.autorefresh)\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.main {\r\n  display: flex;\r\n  padding: 0;\r\n}\r\n.container {\r\n  flex: 1;\r\n  overflow: auto;\r\n}\r\n.topNav {\r\n  position: absolute;\r\n  top: 0px;\r\n  font-size: 14px;\r\n  margin-left: 24px;\r\n}\r\n.title {\r\n  font-family: 'PingFang-SC-Bold';\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #000;\r\n  padding: 18px 0;\r\n}\r\n.breadNav {\r\n  padding-top: 18px;\r\n}\r\n.wrap{\r\n  overflow: auto;\r\n  height: calc(100vh - 96px);\r\n  padding: 24px;\r\n  background-color: #f0f2f5;\r\n}\r\n.search {\r\n  background-color:#fff;\r\n  padding-left: 80px;\r\n  position: relative;\r\n}\r\n.formInline {\r\n  padding: 24px 0 5px\r\n}\r\n.el-input{\r\n  width: 215px;\r\n}\r\n.resetBtn {\r\n  width: 56px;\r\n  height: 32px;\r\n  font-size: 14px;\r\n  color: rgba(0,0,0,0.9);\r\n  padding: 7px 13px;\r\n}\r\n.searchBtn {\r\n  width: 56px;\r\n  height: 32px;\r\n  color: #fff;\r\n  border: 1px solid #1ac492;\r\n  font-size: 14px!important;\r\n  background-color: #1ac492;\r\n  padding: 7px 13px;\r\n}\r\n.advancedBtn {\r\n  position: absolute;\r\n  right: 10px;\r\n}\r\n.gaoji {\r\n  border: 0;\r\n  font-size: 14px;\r\n  color: #1ac492;\r\n}\r\n.mainContainer {\r\n  overflow:auto;\r\n  margin:18px 0;\r\n  background-color:#fff;\r\n  position: relative;\r\n  padding: 20px;\r\n}\r\n.tableTitle {\r\n  font-size: 16px;\r\n  margin-bottom: 24px;\r\n}\r\n.popBtn {\r\n  position: absolute;\r\n  right: 24px;\r\n  top: 18px;\r\n}\r\n.operateBtn {\r\n  color: #fff;\r\n  font-size: 14px;\r\n  min-width: 56px;\r\n  height: 32px;\r\n  border: 1px solid #1ac492;\r\n  background-color: #1ac492;\r\n  padding: 7px 13px;\r\n}\r\n.paging {\r\n  margin-top: 18px;\r\n  color: rgba(51,51,51,0.9);\r\n}\r\n.paging >>>.el-pager li {\r\n  min-width: 31px;\r\n  height: 31px;\r\n  line-height: 31px;\r\n  border-radius: 2px;\r\n  border: 1px solid #e4e4e4;\r\n  margin: 0 3px;\r\n}\r\n.paging >>>.el-pager li.active,.paging >>>.el-pager li:hover {\r\n  background-color: #effff8;\r\n  border: 1px solid #1ac492;\r\n  color: #1ac492;\r\n  font-size: 14px;\r\n}\r\n.paging >>> .btn-next, .paging >>> .btn-prev {\r\n  min-width: 31px;\r\n  height: 31px;\r\n  line-height: 31px;\r\n  border: 1px solid #e4e4e4;\r\n  padding: 0;\r\n  margin: 0 5px;\r\n}\r\n.paging >>>.el-select .el-input__inner:focus,\r\n.paging >>>.el-pagination__sizes .el-input .el-input__inner:hover,\r\n.paging >>>.el-pagination__sizes .el-input .el-input__inner:active,\r\n.paging >>>.el-pagination__sizes .el-select .el-input.is-focus .el-input__inner{\r\n  border-color: #1ac492;\r\n}\r\n\r\n.paging >>>.el-pagination__jump {\r\n  margin-left: 0px;\r\n}\r\n.paging >>>.el-pagination__jump .el-input__inner:focus {\r\n  border: 1px solid #1ac492;\r\n  margin-left: 0px;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LicenseAuthorize.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LicenseAuthorize.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LicenseAuthorize.vue?vue&type=template&id=06c497fb&scoped=true&\"\nimport script from \"./LicenseAuthorize.vue?vue&type=script&lang=js&\"\nexport * from \"./LicenseAuthorize.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LicenseAuthorize.vue?vue&type=style&index=0&id=06c497fb&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06c497fb\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LicenseAuthorize.vue?vue&type=style&index=0&id=06c497fb&scoped=true&lang=css&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLicense.vue?vue&type=style&index=0&id=93be56aa&scoped=true&lang=css&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportLicense.vue?vue&type=style&index=0&id=7505c17b&scoped=true&lang=css&\""],"sourceRoot":""}