(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c75d8d9"],{"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3");var s=a("6b75");function i(e,t){if(e){if("string"===typeof e)return Object(s["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(s["a"])(e,t):void 0}}},"13d5":function(e,t,a){"use strict";var s=a("23e7"),i=a("d58f").left,o=a("a640"),r=a("2d00"),n=a("605d"),l=o("reduce"),c=!n&&r>79&&r<83;s({target:"Array",proto:!0,forced:!l||c},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2018:function(e,t,a){"use strict";a("26b3")},"259a":function(e,t,a){},"25f0":function(e,t,a){"use strict";var s=a("6eeb"),i=a("825a"),o=a("d039"),r=a("ad6d"),n="toString",l=RegExp.prototype,c=l[n],d=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=n;(d||u)&&s(RegExp.prototype,n,(function(){var e=i(this),t=String(e.source),a=e.flags,s=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?r.call(e):a);return"/"+t+"/"+s}),{unsafe:!0})},"26b3":function(e,t,a){},"27ef":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAEhElEQVRogeWaT2wUVRzHv/PHMt1i9w+6KVaMUofQ2oAHQrQ1JJCwXoyBk5YaSIyBhAR71Tn00MOgR/QEeiIUj/XApRNjo4nVQ0PVVPpnUlCaAg1pSZPtUrp017y3b4bZ7m773rS7s1s+yWYnk/fe7/vd2fd+789I2CJ0y9gP4CiAQwD2kVsAdgJoYBGWACQB2ACmAIwAGLIT5sRWKNiUEd0yWgGcBtANYI/PZmYA9AO4aifMcb9afBnRLaMDQC+A9/0GLsEggD47YQ6LVhQyolsG+dUvATi5ScEbMQCgx06YM7wVuI3olvEZMxEqh/IipJiZ73kKb2hEtwwi/ArrB0FA+s9ZO2GmfBvRLSMK4AaAjoBMOJA+84GdMB+VKlDSCDPxK4D2cioUYAzAkVJm5BImQuxJVIsJMC03mLYCihphfSLov1MxOpi2AgqMsNEpqI7NQzfTmEdeH2F5YqKCQ6xfyAi235tn1j6RSuaJzRBiWl3cJ8KmHb/VgAkvnc50xvtEegOXJY6rmT4RNou9VTv682gjs2aV3TnNU+PdWAu+OdCF8Av1ZVW2mH6Mz//+Ab8vTPMUJ9q/dP5aXMNt16uHqYlsNpv3IWQymU1Iz4fEILE4odpltrLjWhSpskK/FxYWkEwmkUqlMD8/T03Mzc0hnU4LCX5iT2Pl9r/0+mlmFTcfTmElk86LxcEe4kFmy9OKk569j4m33sF462Gk7z/AV6P96PqpDxdv9vuRclRla+yKI+2og9L4IiBJkDUNMa2RSojtaPQj5ZDKNgqEkCSp5IcX9aVdaPtvjJaWG0I4Hz2Bj1qOYZfmy8g+le12cPF4dSX3q8VibvFQKDcRaGpqEo5ODHjxmnBicaKrbMuGi8t3fkGzFkGzFoXAjy8EGQRnlx/RWALslHTLyIoGu/TGSbzd0FwWI38uzaLnzoBwPZWjjAtJiN8ePIVGVRMOxMtu7Ebn6+248Nd13oRIkdkOIBckSRET5U6IJIZAQiQsyWwbk4utTojL45NYnpii1yQR/jF3C09WhRMiISmzvdiKQxLi5IFOTB58D+l7D/D16HWc+dnExVFfCdGW2YZyxZHrNSiRMJRohF7H66NUQlyL+JEypbJd8U9FaimKAlmWaQJ0vsk9kYSoxKJou/sPvSZGzkU/xMdvHkO4jjsbeBkhRoZ4S6ee5pJUJPLsV3MSYjweF45ODHjxmnBicTLkLKzu8syAWxpeRl/rCbxSF85lLgdFgu8MSdpZ9bQlSbi3soje8R8xvfSQp4UZO2G+5uQR0sO+2KgGabh75DtkLo8he3vRvS+fa4e0N+zHBm2HtOf6aItBPtMq0gQdHbbNUpeuENlJ0WDwmoQZdE65vLsofbWhPQ9Xs2uE7Q+Jz9aCY8B7RLd2p7GHbUdWOymmFUWNsL3UnhowUnC+WHTw1y3jWhXvyPfbCfOTtTdLnY+cZcdd1cYw01bA9j56Q66/kApHquTJDK9nAusZwTMzx51pQECQ2MfXM4Hn6oUBL9viFQ4vNf9SzVpq/jWnYgT64hmA/wHflZvY1m0A2wAAAABJRU5ErkJggg=="},"2a4f":function(e,t,a){},"2b8b":function(e,t,a){e.exports=a.p+"img/nodata1.3cbcbf06.png"},"2c2c":function(e,t,a){"use strict";a("259a")},"3c94":function(e,t,a){"use strict";a("98fd")},4418:function(e,t,a){},"4df4":function(e,t,a){"use strict";var s=a("0366"),i=a("7b0b"),o=a("9bdd"),r=a("e95a"),n=a("50c4"),l=a("8418"),c=a("35a1");e.exports=function(e){var t,a,d,u,h,p,m=i(e),f="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,v=void 0!==b,w=c(m),y=0;if(v&&(b=s(b,g>2?arguments[2]:void 0,2)),void 0==w||f==Array&&r(w))for(t=n(m.length),a=new f(t);t>y;y++)p=v?b(m[y],y):m[y],l(a,y,p);else for(u=w.call(m),h=u.next,a=new f;!(d=h.call(u)).done;y++)p=v?o(u,b,[d.value,y],!0):d.value,l(a,y,p);return a.length=y,a}},"61e2":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABYUlEQVR42lWSuY7CQAyG53GhICFItKCAaDg2BRQ8SCQKELRB4hCnEo6CCgrC0SFICB94lWVdzPgc/789KgzDKIrCj6Acj0fXdReLxel0Eo8IuuJ6Pp+cnueVSqV0Ol0uly3L0jStUChst1uSJEFJUa/XI9bv96MvGQwGuq53u10x36l0NAzjfD6jbzabn4+sVivBQzb6LwDTNEejEcb9fk8kErztOE4ymbzdbrSeTqf5fP79KvAzmYyguVwugoEygO52O9HBRkgtl8tKpRKTfTwe1+u11WrRF12c9Xp9PB6r+Xxeq9XiOSC2bTOKw+EglZzVapX5KNgAAJS4giAQZvv9/rs4lUr5vq+whVY8I3jMZjPJAxihYrGIqTDAkM1mqZNwo9FoNpsotIINS1mv138r6HQ6uIbDoWSDhCcmkwnc2+22gFFxX/YOG2KwZAVU5nI5cP/7A98i3wVIjExYxvICbA7xkncfoMAAAAAASUVORK5CYII="},"6b75":function(e,t,a){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}a.d(t,"a",(function(){return s}))},"6cdd":function(e,t,a){},"806c":function(e,t,a){"use strict";a("2a4f")},"890f":function(e,t,a){"use strict";a("4418")},"90eb":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAACu0lEQVRYhc2YP2hTURSHv6ShpPXPogGHaomgiXYRMRQbdQptHcRBUNBJkKqok6O7u1qRdtDJioo4KNRSJzUVqUUEo80SqUWEKlJUYhtNIiecF17TJs2776X1B4/wyL2/8+Xl3XPOvb7ZS3twqDDQA+wDdgDtwDq1+AlMAR+AF8AI8NGJfaDOcU3AUeA8sBfwVRm3Qa/dwAmgCLwE+oF7QH65QP46YBLAO2AI6KoBs5R8OmdIPRJugILAADAKRB1AVFNUvQbU2xFQCHgG9HkAUqk+9Q7VCyQDnwOxBsBYimmMRVCVQK3AIyDSQBhLEY3VWgvoCtC5AjCWOjVmWfZlLyvglFPHNWduE2jbXr6fTz5kbviyEwuJeRd4iu0JyedVpzAe6prmujLQMc26q6WoJt4y0LlVhLEkVaAEFNZs6okKs19MbaQkbRWgXofloKYK3z+bThWGHgGKewXjgeIC1OHGJz+V8hJopwBt9tLRpdr9tubqf9DaevqhFZVf207PlJ9+48bqlwBNewlUzH51M/2TFNf3wC5Th9z4A/5mXruBsCsV0N3BcVOHwrd06fJIyYBuVYqm2ToQ6SbYe5amUBu5VJL50RumgMIwIu9QBhgz/YEthy+WYETNHXGaY0dMrWS7lLGW/XVTF1+wZcG9f1PY1KofW/shm7hJE5fc+JOF92P3TWwmlQH7Vjqh+ybH8m+MENjWxZ+3j02XfbcV295TS097Czjp1E1e4pz5SrtpfxCVpUO6tlemzgaSWBfs0yqBssAhwLPEUkNpjZWtBSSSl+AAMNFAmAmNseiFq1btZ4D9wGADYAb1bGlmqS9rtR+/gdO6Arz4C9PqJZ5z1QbV0w/JCpA2V+qdZFNJ8U4kc+TwSjyWTSv1nqDJydcdvSQVH9THLhu8LcB6HfdDWghNdFK0hx0d6QH/AJE/mAPE60FoAAAAAElFTkSuQmCC"},"98fd":function(e,t,a){},"9bdd":function(e,t,a){var s=a("825a"),i=a("2a62");e.exports=function(e,t,a,o){try{return o?t(s(a)[0],a[1]):t(a)}catch(r){throw i(e),r}}},a630:function(e,t,a){var s=a("23e7"),i=a("4df4"),o=a("1c7e"),r=!o((function(e){Array.from(e)}));s({target:"Array",stat:!0,forced:r},{from:i})},b2d7:function(e,t,a){"use strict";a("c95e")},b64b:function(e,t,a){var s=a("23e7"),i=a("7b0b"),o=a("df75"),r=a("d039"),n=r((function(){o(1)}));s({target:"Object",stat:!0,forced:n},{keys:function(e){return o(i(e))}})},b85c:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");var s=a("06c5");function i(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Object(s["a"])(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){l=!0,r=e},f:function(){try{n||null==a["return"]||a["return"]()}finally{if(l)throw r}}}}},bd30:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"container"},[a("div",{staticClass:"topNav"},[a("el-breadcrumb",{staticClass:"breadNav",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"crumb1"},[e._v("首页")]),a("el-breadcrumb-item",{staticClass:"crumb1"},[e._v("策略管理")]),a("el-breadcrumb-item",{staticClass:"crumb2"},[e._v("启动度量")])],1)],1),a("div",{staticClass:"wrap"},[a("div",{staticClass:"search"},[a("el-form",{ref:"formInline",staticClass:"formInline",attrs:{inline:!0,"label-position":"right","label-width":"150px",model:e.formInline,size:"small"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"终端名称/网络地址：",prop:"terminalName"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入终端名称/网络地址",oninput:"value=value.replace(/[%]/g, '')"},model:{value:e.formInline.terminalName,callback:function(t){e.$set(e.formInline,"terminalName",t)},expression:"formInline.terminalName"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.advancedSearch,expression:"advancedSearch==true"}],attrs:{label:"日期：",prop:"startDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"date",placeholder:"选择开始时间"},model:{value:e.formInline.startDate,callback:function(t){e.$set(e.formInline,"startDate",t)},expression:"formInline.startDate"}}),e._v(" "),a("span",{},[e._v("至")]),e._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"date",placeholder:"选择结束时间"},model:{value:e.formInline.endDate,callback:function(t){e.$set(e.formInline,"endDate",t)},expression:"formInline.endDate"}})],1),a("el-form-item",{staticClass:"advancedBtn"},[a("el-button",{staticClass:"resetBtn",attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")]),a("el-button",{staticClass:"searchBtn",attrs:{size:"small"},on:{click:e.searchData}},[e._v("查询")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.advancedFlag,expression:"advancedFlag==true"}],staticClass:"gaoji",attrs:{size:"small"},on:{click:e.switchBtn}},[e._v("展开"),a("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-weight":"bold"}})]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.advancedFlag,expression:"advancedFlag==false"}],staticClass:"gaoji",attrs:{size:"small"},on:{click:e.switchBtn}},[e._v("收起"),a("i",{staticClass:"el-icon-arrow-up el-icon--right",staticStyle:{"font-weight":"bold"}})])],1)],1)],1),a("div",{staticClass:"mainContainer"},[a("div",{staticClass:"tableTitle"},[e._v("启动度量")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"startMeasureTable",staticStyle:{width:"99%","font-size":"14px"},attrs:{data:e.startMeasureData,size:"mini","tooltip-effect":"light","element-loading-text":"加载中，请稍后","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"cell-style":{padding:"0px",color:"rgba(0, 0, 0, 0.9)"},fit:!0,"row-key":"nodeId"},on:{"sort-change":e.sortChange}},[a("template",{slot:"empty"},[a("div",[e._v("暂无数据")])]),a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50px"}}),a("el-table-column",{attrs:{prop:"name",label:"终端名称","min-width":"100%","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"ip",label:"网络地址","min-width":"100%"}}),a("el-table-column",{attrs:{prop:"onlineStatus",label:"终端状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.onlineStatus?a("span",[a("span",{staticClass:"aqua"},[e._v("●")]),e._v("在线")]):"0"==t.row.onlineStatus?a("span",[a("span",{staticClass:"lightRed"},[e._v("●")]),e._v("离线")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"bmeasureStatus",label:"启动策略状态","min-width":"100%",formatter:e.statusVal}}),a("el-table-column",{attrs:{prop:"beBootMeasureResult",label:"结果",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.beBootMeasureResult?a("span",[a("span",{staticClass:"aqua"},[e._v("●")]),e._v("可信")]):"1"==t.row.beBootMeasureResult?a("span",[a("span",{staticClass:"lightRed"},[e._v("●")]),e._v("不可信")]):"2"==t.row.beBootMeasureResult?a("span",[a("span",{staticClass:"greyDot"},[e._v("●")]),e._v("未度量")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"installerTime",label:"时间","min-width":"100%",sortable:"custom","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#1ac492"},attrs:{type:"text"},on:{click:function(a){return e.measureRecord(t.row)}}},[e._v("度量记录")])]}}])})],2),e.pageShow?a("el-pagination",{staticClass:"paging",attrs:{align:"right","current-page":e.currentPage.sync,"page-sizes":[10,20],"page-size":e.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)])]),1==e.showDialog?a("div",{staticClass:"dialogContent"},[a("measure-details",{ref:"details",attrs:{rowMessage:e.rowMessage},on:{closeDialog:e.closeDialog}})],1):e._e(),1==e.mask?a("div",{staticClass:"mask",on:{click:e.closeDialog}}):e._e(),a("measure-record",{ref:"record",on:{handleSuccess:e.refreshData}})],1)},i=[],o=(a("d81d"),a("ac1f"),a("5319"),a("b775")),r=a("ac95"),n=a("b893"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"启动度量配置",top:"5vh",width:"65%",visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.diaClose}},[s("el-button",{attrs:{size:"small"},on:{click:e.openPolicy}},[e._v("获取策略记录")]),s("el-table",{staticClass:"diatable",staticStyle:{width:"100%",border:"1px solid #F0F2F5"},attrs:{data:e.tableData,stripe:"","tooltip-effect":"light","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"row-key":"num","cell-style":{color:"rgba(0, 0, 0, 0.9)"},"max-height":"55vh","expand-row-keys":e.expands},on:{"expand-change":e.expandChange}},[s("template",{slot:"empty"},[e.emptytxt?s("img",{attrs:{src:a("2b8b")}}):e._e()]),s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"expandTable",attrs:{id:t.row.id}},[s("el-table",{attrs:{data:e.expandData.filter((function(e){return e.name==t.row.name})),width:"100%","show-header":!1,size:"mini"}},[s("el-table-column",{attrs:{prop:"hash",label:"Hash","min-width":"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return 0==t.row.disabled?[s("el-col",{attrs:{span:9,offset:12}},[s("el-col",{attrs:{span:22}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],attrs:{size:"mini"},model:{value:t.row.hash,callback:function(a){e.$set(t.row,"hash",a)},expression:"scope.row.hash"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}]},[e._v(e._s(t.row.hash))])],1),s("el-col",{attrs:{span:2}},[s("i",{staticClass:"el-icon-remove",staticStyle:{color:"#FF4D4F",border:"0","font-size":"22px","margin-left":"14px"},on:{click:function(a){return a.preventDefault(),e.removeDomain(t.$index)}}})])],1)]:void 0}}],null,!0)})],1)],1)]}}])}),s("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50px"}}),s("el-table-column",{attrs:{prop:"stage",label:"度量阶段","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],attrs:{size:"mini"},model:{value:t.row.stage,callback:function(a){e.$set(t.row,"stage",a)},expression:"scope.row.stage"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}]},[e._v(e._s(t.row.stage))])]}}])}),s("el-table-column",{attrs:{prop:"name",label:"度量对象名称","min-width":"140%"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],attrs:{size:"mini"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}]},[e._v(e._s(t.row.name))])]}}])}),s("el-table-column",{attrs:{prop:"hash",label:"度量对象hash","min-width":"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-row",{attrs:{gutter:16}},[s("el-col",{attrs:{span:22}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],attrs:{size:"mini"},model:{value:t.row.hash,callback:function(a){e.$set(t.row,"hash",a)},expression:"scope.row.hash"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}]},[e._v(e._s(t.row.hash))])],1),s("el-col",{attrs:{span:2}},[s("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#1ac492",border:"0","font-size":"22px"},on:{click:function(a){return e.addDomain(t.$index,t.row)}}})])],1)]}}])}),s("el-table-column",{attrs:{label:"操作","min-width":"120%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticClass:"btnClass",attrs:{plain:"",type:"success",size:"mini"},on:{click:function(a){return e.save1(t.row)}}},[e._v(" 保存 ")]),s("el-button",{staticClass:"btnClass",attrs:{plain:"",type:"warning",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v(" 编辑 ")])]}}])})],2),s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"el-table-add-row",attrs:{type:"success",plain:"",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v(" 添加 ")])],1),s("el-col",{attrs:{span:24}},[s("el-pagination",{staticClass:"paging",attrs:{align:"right","current-page":e.currentPage2,"page-sizes":[10,20],"page-size":e.pageSize2,layout:"total, prev, pager, next, jumper",total:e.total2},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2}})],1),s("add-policy",{ref:"poplay",on:{policy:e.updateData}}),s("policy-record",{ref:"record"}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"canBtn",attrs:{size:"small"},on:{click:e.diaClose}},[e._v("取 消")]),s("el-button",{staticClass:"sureBtn",attrs:{size:"small"},on:{click:e.submit}},[e._v("确定")])],1)],1)},c=[],d=a("b85c"),u=(a("b0c0"),a("a434"),a("99af"),a("d3b7"),a("25f0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"配置策略",top:"10vh",width:"30%",visible:e.dialogFormVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.diaClose}},[a("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"145px",rules:e.rules,model:e.ruleForm,size:"small"}},[a("el-form-item",{attrs:{prop:"measureName",label:"度量对象："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{clearable:""},model:{value:e.ruleForm.measureName,callback:function(t){e.$set(e.ruleForm,"measureName",t)},expression:"ruleForm.measureName"}})],1),a("el-form-item",{attrs:{prop:"measureStage",label:"度量阶段："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{clearable:""},model:{value:e.ruleForm.measureStage,callback:function(t){e.$set(e.ruleForm,"measureStage",t)},expression:"ruleForm.measureStage"}})],1),a("el-form-item",{attrs:{prop:"measureHash",label:"HASH："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{clearable:""},model:{value:e.ruleForm.measureHash,callback:function(t){e.$set(e.ruleForm,"measureHash",t)},expression:"ruleForm.measureHash"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"canBtn",attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{staticClass:"sureBtn",attrs:{size:"small",disabled:e.btnf1},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")])],1)],1)}),h=[],p={name:"ConfigStrategy",data:function(){return{btnf1:!1,dialogFormVisible:!1,labelPosition:"right",rules:{measureName:[{required:!0,message:"请输入度量对象名称",trigger:"blur"}],measureStage:[{required:!0,message:"请输入度量对象阶段",trigger:"blur"}],measureHash:[{required:!0,message:"请输入hash",trigger:"blur"}]},ruleForm:{measureName:"",measureStage:"",measureHash:""}}},methods:{submitForm:function(e){var t=this;t.$refs[e].validate((function(e){if(e){var a={name:t.ruleForm.measureName,stage:t.ruleForm.measureStage,hash:t.ruleForm.measureHash};t.$emit("policy",a),t.diaClose()}else t.btnf1=!1}))},diaOpen:function(){var e=this;this.dialogFormVisible=!0,this.btnf1=!1,this.ruleForm.measureName="",this.ruleForm.measureStage="",this.ruleForm.measureHash="",e.$nextTick((function(){e.$refs.ruleForm.clearValidate()}))},diaClose:function(){var e=this;e.dialogFormVisible=!1}}},m=p,f=(a("fa4e"),a("2877")),g=Object(f["a"])(m,u,h,!1,null,"b06a1d5e",null),b=g.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"启动度量记录",top:"5vh",width:"55%",visible:e.dialogFormVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.diaClose}},[s("el-form",{ref:"ruleForm",attrs:{"label-position":"right","label-width":"90px",size:"small"}},[s("el-form-item",{attrs:{prop:"ip",label:"网络地址："}},[s("el-input",{staticStyle:{width:"45%"},attrs:{clearable:"",disabled:""},model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}},[e._v(e._s(e.ip))])],1)],1),s("div",{staticClass:"statusTip"},[s("span",[e._v(e._s(this.status))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:1==this.getOldBtn,expression:"this.getOldBtn == true"}]},[s("el-button",{attrs:{size:"small"},on:{click:e.getOldList}},[e._v("获取历史记录")])],1)]),s("el-table",{staticStyle:{width:"100%",border:"1px solid #F0F2F5"},attrs:{data:e.tableData.slice((e.currentPage2-1)*e.pageSize2,e.currentPage2*e.pageSize2),stripe:"","tooltip-effect":"light","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"max-height":"55vh"}},[s("template",{slot:"empty"},[e.emptytxt?s("img",{attrs:{src:a("2b8b")}}):e._e()]),s("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50px"}}),s("el-table-column",{attrs:{prop:"stage",label:"度量阶段","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.stage>=0&&t.row.stage<=999?s("span",[e._v("TPCM及度量加载器(BIOS,UBOOT)及前期固件验证")]):t.row.stage>=1e3&&t.row.stage<=1999?s("span",[e._v("加载器加载驱动、配置、操作系统或二级加载器(GRUB)")]):t.row.stage>=2e3&&t.row.stage<=2999?s("span",[e._v("二级加载器(GRUB)加载驱动、配置、操作系统")]):t.row.stage>=3e3?s("span",[e._v("操作系统加载驱动、配置、服务程序")]):e._e()]}}])}),s("el-table-column",{attrs:{prop:"name",label:"度量对象名称","min-width":"150%"}}),s("el-table-column",{attrs:{prop:"result",label:"度量结果","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.result?s("span",[e._v("可信")]):"1"==t.row.result?s("span",[e._v("不可信")]):"2"==t.row.result?s("span",[e._v("未度量")]):e._e()]}}])}),s("el-table-column",{attrs:{prop:"hash",label:"度量对象hash","min-width":"150%"}})],2),s("el-pagination",{staticClass:"paging",attrs:{align:"right","current-page":e.currentPage2,"page-sizes":[10,20],"page-size":e.pageSize2,layout:"total, prev, pager, next, jumper",total:e.total2},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2}})],1)},w=[],y=(a("b64b"),{name:"ConfigPop",data:function(){return{dialogFormVisible:!1,emptytxt:"",tableData:[],currentPage2:1,total2:0,pageSize2:10,nodeId:"",autorefresh:"",timer:"",status:"",getOldBtn:!1,recordType:"",ip:""}},methods:{diaOpen:function(e){var t=this;t.ip=e.ip,t.emptytxt="",t.dialogFormVisible=!0,t.tableData=[],t.recordType="",t.nodeId=e.nodeId,t.getOldBtn=!1,t.status="获取配置中，请稍后",Object(o["a"])({url:"/sec/lBMeasureRecord",method:"post",data:{node_id:e.nodeId}}).then((function(e){var a=e.data;a.list.map((function(e,t){e.measureTime=Object(r["a"])(e.measureTime)})),t.tableData=a.list})),t.initData(),"[]"==JSON.stringify(t.tableData)?t.timer=setInterval((function(){"[]"!=JSON.stringify(t.tableData)&&void 0!=JSON.stringify(t.tableData)&&t.tableData.length>0&&(t.status="已获取最新记录",t.getOldBtn=!1)}),2e3):(clearInterval(t.autorefresh),clearInterval(t.timer),t.status="已获取最新记录",t.getOldBtn=!1),setTimeout((function(){clearInterval(t.autorefresh),clearInterval(t.timer),"[]"==JSON.stringify(t.tableData)||void 0==JSON.stringify(t.tableData)?(t.status="请求已超时，请点击右侧按钮获取历史记录",t.getOldBtn=!0):(t.status="已获取最新记录",t.getOldBtn=!1)}),5e3)},diaClose:function(){var e=this;clearInterval(this.autorefresh),e.dialogFormVisible=!1},indexMethod:function(e){return 1===this.currentPage2?e<9?"0"+(e+1):e+1:e+1+this.pageSize2*(this.currentPage2-1)},handleSizeChange2:function(e){this.pageSize2=e,"list"==that.recordType?that.getList():"old"==that.recordType&&that.getOldList()},handleCurrentChange2:function(e){this.currentPage2=e,"list"==that.recordType?that.getList():"old"==that.recordType&&that.getOldList()},getList:function(){var e=this,t=this;Object(o["a"])({url:"/sec/lBMeasureRecordList",method:"post",data:{node_id:t.nodeId}}).then((function(a){var s=a.data;s.list.length>0&&(t.recordType="list",t.total2=s.total,s.list.map((function(e,t){e.measureTime=Object(r["a"])(e.measureTime)})),t.tableData=s.list,clearInterval(e.autorefresh))}))},getOldList:function(){var e=this;Object(o["a"])({url:"/sec/lBMeasureRecordListOld",method:"post",data:{node_id:e.nodeId}}).then((function(t){var a=t.data;0!=Object.keys(a.list).length&&(a.list.map((function(e,t){e.measureTime=Object(r["a"])(e.measureTime)})),e.tableData=a.list,e.total2=a.total,e.recordType="old"),0==a.total?e.emptytxt=!0:e.emptytxt=!1}))},initData:function(){var e=this;e.autorefresh=setInterval((function(){e.getList()}),1e3)}},destroyed:function(){clearInterval(this.autorefresh),clearInterval(this.timer)}}),x=y,S=(a("3c94"),Object(f["a"])(x,v,w,!1,null,"6deabb0e",null)),C=S.exports,A={name:"ConfigPop",components:{AddPolicy:b,PolicyRecord:C},data:function(){return{dialogFormVisible:!1,emptytxt:"",tableData:[],currentPage2:1,total2:0,pageSize2:10,nodeId:"",expands:[],expandData:[],dataList:[],addData:[],addExpandData:[],innerVisible:!1,rowData:{}}},methods:{diaOpen:function(e){this.emptytxt="",this.dialogFormVisible=!0,this.nodeId=e.nodeId,this.dataList=[],this.expands=[],this.expandData=[],this.rowData=e,this.loadData()},diaClose:function(){this.dialogFormVisible=!1},loadData:function(){var e=this;Object(o["a"])({url:"/sec/lBMeasureList?node_id="+this.nodeId,method:"post"}).then((function(t){var a=t.data;if(a.data){a.data.map((function(e,t){e.time=Object(r["a"])(e.time),e.show=!1,e.num=t,e.pushed=!1}));var s=a.data;e.sortArr(s,"stage"),e.tableData=a.data;for(var i=0;i<e.tableData.length-1;i++)for(var o=i+1;o<e.tableData.length;o++)e.tableData[i].name==e.tableData[o].name&&(e.tableData.splice(o,1),o--);e.total=a.total}0==a.total?e.emptytxt=!0:e.emptytxt=!1}))},indexMethod:function(e){return 1===this.currentPage2?e<9?"0"+(e+1):e+1:e+1+this.pageSize2*(this.currentPage2-1)},handleSizeChange2:function(e){this.pageSize2=e,this.loadData()},handleCurrentChange2:function(e){this.currentPage2=e,this.loadData()},openPolicy:function(){this.$refs.record.diaOpen(this.rowData)},submit:function(){var e,t=this,a=[],s=Object(d["a"])(this.dataList);try{for(s.s();!(e=s.n()).done;){var i=e.value;if(Array.isArray(i)){var r,n=Object(d["a"])(i);try{for(n.s();!(r=n.n()).done;){var l=r.value;a.push(l)}}catch(g){n.e(g)}finally{n.f()}}else a.push(key)}}catch(g){s.e(g)}finally{s.f()}for(var c=0,u=a;c<u.length;c++){var h=u[c];if(h.show)return this.$message.warning("请先保存当前编辑项")}var p=[];this.tableData.map((function(e,t){1==e.pushed&&p.push(e)}));var m=[],f=[];m="[]"!=JSON.stringify(p)?a.concat(p):a,f="[]"!=JSON.stringify(this.addExpandData)&&"undefined"!=typeof t.addExpandData?m.concat(this.addExpandData):m,Object(o["a"])({url:"/sec/creatBMeasurePolicy",method:"post",data:f}).then((function(e){e.data;t.$emit("handleSuccess"),t.diaClose()}))},save1:function(e){e.show=!1,this.expandData.map((function(e,t){e.show=!1}))},edit:function(e){e.show=!0,this.expandData.map((function(e,t){e.show=!0}))},handleAdd:function(){this.$refs.poplay.diaOpen()},expandChange:function(e,t){var a=this;t.length?(a.expands=[],e&&a.expands.push(e.num)):a.expands=[];var s=a.expands.toString();s>=this.dataList.length?a.expandData=a.addExpandData:(a.dataList[s].map((function(e,t){e.disabled=0==t})),a.expandData=this.dataList[s])},removeDomain:function(e){this.expandData.splice(e,1)},addDomain:function(e,t){0==this.expands.length?this.$message.warning("请先展开要添加的项"):e!=this.expands.toString()?this.$message.warning("请展开当前要添加的项"):("undefined"==typeof this.expandData&&(this.expandData=[]),this.expandData.push({name:t.name,nodeId:t.nodeId,stage:t.stage,status:t.status,num:t.num,hash:"",show:!0,disabled:!1}))},sortArr:function(e,t){var a,s=[],i=[];for(var o in e=e.sort((function(e,a){var s=e[t],i=a[t];return s<i?-1:1})),e.length&&(a=e[0][t]),e)e[o][t]==a?i.push(e[o]):(a=e[o][t],s.push(i),i=[e[o]]);s.push(i),this.dataList=s},updateData:function(e){e.pushed=!0,e.show=!1,e.num=this.tableData.length,this.tableData.push(e)}}},D=A,O=(a("890f"),Object(f["a"])(D,l,c,!1,null,"b14e372c",null)),k=O.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dialogStyle"},[s("div",{staticClass:"title"},[s("span",[e._v("启动度量详情")]),s("span",{staticClass:"closeBtn",on:{click:e.closeDialog}},[s("i",{staticClass:"el-icon-close"})])]),s("div",{staticClass:"terminalInfo"},[s("img",{staticClass:"terminalImg",attrs:{src:a("27ef"),alt:""}}),s("span",[e._v(e._s(this.rowMessage.ip))]),s("img",{staticClass:"questionImg",attrs:{src:a("61e2"),title:"网络地址"}})]),s("div",{staticClass:"container"},[s("el-table",{staticStyle:{"font-size":"14px",border:"1px solid #F0F2F5"},attrs:{data:e.tableData,stripe:"",border:"","tooltip-effect":"light","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"cell-style":{padding:"0px",color:"rgba(0, 0, 0, 0.9)"}}},[s("template",{slot:"empty"},[s("div",[e._v("暂无数据")])]),s("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),s("el-table-column",{attrs:{prop:"name",label:"度量对象名称","min-width":"200%"}}),s("el-table-column",{attrs:{prop:"stage",label:"度量阶段","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.stage>=0&&t.row.stage<=999?s("span",[e._v("TPCM及度量加载器(BIOS,UBOOT)及前期固件验证")]):t.row.stage>=1e3&&t.row.stage<=1999?s("span",[e._v("加载器加载驱动、配置、操作系统或二级加载器(GRUB)")]):t.row.stage>=2e3&&t.row.stage<=2999?s("span",[e._v("二级加载器(GRUB)加载驱动、配置、操作系统")]):t.row.stage>=3e3?s("span",[e._v("操作系统加载驱动、配置、服务程序")]):e._e()]}}])}),s("el-table-column",{attrs:{prop:"hash",label:"hash","min-width":"200%"}}),s("el-table-column",{attrs:{prop:"time",label:"时间","min-width":"100%"}})],2)],1)])},I=[],F={name:"MeasureDetails",props:{rowMessage:{type:Object}},data:function(){return{tableData:[],emptytxt:""}},mounted:function(){this.loadData()},methods:{loadData:function(){this.tableData=[];var e=this;e.dialogFormVisible=!0,Object(o["a"])({url:"/sec/lBMeasureList?node_id="+this.rowMessage.nodeId,method:"post"}).then((function(t){var a=t.data;a.data&&(a.data.map((function(e,t){e.time=Object(r["a"])(e.time)})),e.tableData=a.data,e.total=a.total),0==a.total?e.emptytxt=!0:e.emptytxt=!1}))},closeDialog:function(){this.$emit("closeDialog")}}},z=F,M=(a("2c2c"),Object(f["a"])(z,_,I,!1,null,"4e04497a",null)),B=M.exports,N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"启动度量记录",top:"5vh",width:"75%",visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.diaClose}},[s("el-tabs",{staticClass:"record",attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"度量记录",name:"first"}},[s("div",{staticStyle:{display:"flex"}},[s("el-form",{ref:"ruleForm",staticStyle:{flex:"2"},attrs:{"label-position":"right","label-width":"90px",size:"small"}},[s("el-form-item",{attrs:{prop:"ip",label:"网络地址："}},[s("el-input",{staticStyle:{width:"45%"},attrs:{clearable:"",disabled:""},model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}},[e._v(e._s(e.ip))])],1)],1),s("div",{staticClass:"statusTip"},[s("el-button",{staticClass:"certainBtn",attrs:{size:"small"},on:{click:e.getNewListRecord}},[e._v("获取新记录")])],1)],1),s("el-table",{staticClass:"diatable",staticStyle:{width:"100%",border:"1px solid #F0F2F5"},attrs:{data:e.tableData.slice((e.currentPage2-1)*e.pageSize2,e.currentPage2*e.pageSize2),stripe:"","tooltip-effect":"light","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"max-height":"50vh"}},[s("template",{slot:"empty"},[e.emptytxt?s("img",{attrs:{src:a("2b8b")}}):e._e()]),s("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50px"}}),s("el-table-column",{attrs:{prop:"stage",label:"度量阶段","min-width":"110%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.stage>=0&&t.row.stage<=999?s("span",[e._v("TPCM及度量加载器(BIOS,UBOOT)及前期固件验证")]):t.row.stage>=1e3&&t.row.stage<=1999?s("span",[e._v("加载器加载驱动、配置、操作系统或二级加载器(GRUB)")]):t.row.stage>=2e3&&t.row.stage<=2999?s("span",[e._v("二级加载器(GRUB)加载驱动、配置、操作系统")]):t.row.stage>=3e3?s("span",[e._v("操作系统加载驱动、配置、服务程序")]):s("span",[e._v(e._s(t.row.stage))])]}}])}),s("el-table-column",{attrs:{prop:"name",label:"度量对象名称","min-width":"150%"}}),s("el-table-column",{attrs:{prop:"bootMeasures",label:"度量对象hash","min-width":"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.bootMeasures,(function(t,a){return s("div",{key:a},[s("div",{staticStyle:{"margin-bottom":"5px"}},[e._v(e._s(t.hash))])])}))}}])}),s("el-table-column",{attrs:{prop:"result",label:"度量结果","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.result?s("span",[e._v("可信")]):"1"==t.row.result?s("span",[e._v("不可信")]):"2"==t.row.result?s("span",[e._v("未度量")]):e._e()]}}])}),s("el-table-column",{attrs:{prop:"time",label:"度量时间","min-width":"115%"}})],2),s("el-pagination",{staticClass:"paging",attrs:{align:"right","current-page":e.currentPage2,"page-sizes":[10,20],"page-size":e.pageSize2,layout:"total, prev, pager, next, jumper",total:e.total2},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2}})],1),s("el-tab-pane",{attrs:{label:"配置策略",name:"second"}},[s("div",{staticStyle:{display:"flex"}},[s("el-form",{ref:"ruleForm",staticStyle:{flex:"2"},attrs:{"label-position":"right","label-width":"90px",size:"small"}},[s("el-form-item",{attrs:{prop:"ip",label:"网络地址："}},[s("el-input",{staticStyle:{width:"45%"},attrs:{clearable:"",disabled:""},model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}},[e._v(e._s(e.ip))])],1)],1),s("div",[s("el-button",{staticClass:"certainBtn",attrs:{type:"text",size:"small"},on:{click:function(t){return e.reAcquDia()}}},[e._v("重新采集")])],1)],1),s("el-table",{staticClass:"diatable",staticStyle:{width:"100%",border:"1px solid #F0F2F5"},attrs:{data:e.tableData2,stripe:"","tooltip-effect":"light","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},"row-key":"num","cell-style":{color:"rgba(0, 0, 0, 0.9)"},"max-height":"50vh"}},[s("template",{slot:"empty"},[e.emptytxt2?s("img",{attrs:{src:a("2b8b")}}):e._e()]),s("el-table-column",{attrs:{type:"index",index:e.indexMethod2,label:"序号",width:"50px"}}),s("el-table-column",{attrs:{prop:"stage",label:"度量阶段","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.added,expression:"scope.row.added"}],class:1==e.stageTips?"errorTips":"",attrs:{size:"mini",maxlength:"4",oninput:"value=value.replace(/[^\\d.]/g,'')"},on:{change:e.stageVal,blur:e.cancelstageTips},model:{value:t.row.stage,callback:function(a){e.$set(t.row,"stage",a)},expression:"scope.row.stage"}}),""==t.row.stage?s("span",[e._v(e._s(t.row.stage))]):!t.row.added&&t.row.stage>=0&&t.row.stage<=999?s("span",[e._v("TPCM及度量加载器(BIOS,UBOOT)及前期固件验证")]):!t.row.added&&t.row.stage>=1e3&&t.row.stage<=1999?s("span",[e._v("加载器加载驱动、配置、操作系统或二级加载器(GRUB)")]):!t.row.added&&t.row.stage>=2e3&&t.row.stage<=2999?s("span",[e._v("二级加载器(GRUB)加载驱动、配置、操作系统")]):!t.row.added&&t.row.stage>=3e3?s("span",[e._v("操作系统加载驱动、配置、服务程序")]):s("span")]}}])}),s("el-table-column",{attrs:{prop:"name",label:"度量对象名称","min-width":"140%"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.added,expression:"scope.row.added"}],attrs:{size:"mini",maxlength:"255"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.added,expression:"!scope.row.added"}]},[e._v(e._s(t.row.name))])]}}])}),s("el-table-column",{attrs:{prop:"bootMeasures",label:"度量对象hash","min-width":"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-row",{attrs:{gutter:16}},[s("el-col",{attrs:{span:22}},e._l(t.row.bootMeasures,(function(a,i){return s("div",{key:i},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],class:1==e.hashTips?"errorTips":"",staticStyle:{width:"90%","margin-bottom":"3px"},attrs:{size:"small",oninput:"value=value.replace(/[^0-9a-fA-F]/g,'')",maxlength:"64"},on:{change:e.hashChange,blur:e.cancelHashtips},model:{value:a.hash,callback:function(t){e.$set(a,"hash",t)},expression:"item.hash"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}],staticStyle:{"margin-bottom":"5px"}},[e._v(e._s(a.hash))]),s("i",{directives:[{name:"show",rawName:"v-show",value:t.row.show&&0!=i,expression:"scope.row.show&&index !=0"}],staticClass:"el-icon-error",staticStyle:{color:"#FF4D4F",border:"0","font-size":"22px","margin-left":"4px"},on:{click:function(s){return s.preventDefault(),e.delHash(t.row,a,i)}}})],1)})),0),t.row.show?s("el-col",{attrs:{span:2}},[s("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#1ac492",border:"0","font-size":"22px"},on:{click:function(a){return e.addInput(t.row,t.$index)}}})]):e._e()],1)]}}])}),s("el-table-column",{attrs:{label:"操作","min-width":"100%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.show,expression:"scope.row.show==true"}],staticClass:"saveBtn",attrs:{type:"text"},on:{click:function(a){return e.save1(t.row,t.$index)}}},[e._v(" 保存 ")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.show,expression:"scope.row.show==true"}],staticClass:"editBtn",attrs:{type:"text"},on:{click:function(a){return e.cancel(t.row,t.$index)}}},[e._v(" 取消 ")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.show,expression:"scope.row.show==false"}],staticClass:"certainBtn",attrs:{type:"text"},on:{click:function(a){return e.edit(t.row,t.$index)}}},[e._v(" 编辑 ")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.show&&t.row.pushed,expression:"scope.row.show==false&&scope.row.pushed "}],staticClass:"cancelBtn",attrs:{type:"text"},on:{click:function(a){return e.handleDel(t.row,t.$index)}}},[e._v(" 删除 ")])]}}])})],2),s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"el-table-add-row",attrs:{type:"success",plain:"",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v(" 添加 ")])],1)],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"canBtn",attrs:{size:"small"},on:{click:e.diaClose}},[e._v("取 消")]),s("el-button",{staticClass:"sureBtn",attrs:{size:"small"},on:{click:e.submit}},[e._v("确定")])],1),s("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible1,width:"30%",top:"30vh","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible1=t}}},[s("div",{staticStyle:{"text-align":"center","font-size":"20px",margin:"20px 0",color:"#000"}},[s("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:a("90eb"),alt:""}}),e._v(" 重新采集策略将覆盖原始策略，是否重新采集？")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible1=!1}}},[e._v("取 消")]),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.reAcqu}},[e._v("确 定")])],1)])],1)},T=[],j=(a("13d5"),{name:"ConfigPop",data:function(){return{dialogFormVisible:!1,dialogVisible1:!1,onlineStatus:"",activeName:"first",emptytxt:"",tableData:[],currentPage2:1,total2:0,pageSize2:10,nodeId:"",autorefresh:"",timer:"",getOldBtn:!1,recordType:"",ip:"",firstNum:0,emptytxt2:"",tableData2:[],currentPage3:1,total3:0,pageSize3:10,stageTips:!1,hashTips:!1,savedItem:{name:"",stage:"",bootMeasures:[]}}},methods:{diaOpen:function(e){this.dialogFormVisible=!0,this.onlineStatus=e.onlineStatus,this.activeName="first",this.ip=e.ip,this.emptytxt="",this.emptytxt2="",this.tableData=[],this.tableData2=[],this.recordType="",this.nodeId=e.nodeId,this.firstNum=0,this.autorefresh="",this.savedItem={name:"",stage:"",bootMeasures:[]},this.getOldList(),this.loadData()},diaClose:function(){var e=this;e.dialogFormVisible=!1},indexMethod:function(e){return 1===this.currentPage2?e<9?"0"+(e+1):e+1:e+1+this.pageSize2*(this.currentPage2-1)},handleSizeChange2:function(e){var t=this;this.pageSize2=e,"list"==t.recordType?t.getNewList():"old"==t.recordType&&t.getOldList()},handleCurrentChange2:function(e){var t=this;this.currentPage2=e,"list"==t.recordType?t.getNewList():"old"==t.recordType&&t.getOldList()},getNewListRecord:function(){var e=this;if(0==this.onlineStatus)return e.$message({showClose:!0,message:"终端已离线",type:"error"});Object(o["a"])({url:"/sec/lBMeasureRecord",method:"post",data:{node_id:e.nodeId}}).then((function(t){t.data;e.initData()})),"[]"==JSON.stringify(e.tableData)?e.timer=setInterval((function(){"[]"!=JSON.stringify(e.tableData)&&void 0!=JSON.stringify(e.tableData)&&e.tableData.length>0&&e.$message({showClose:!0,message:"已获取最新记录",type:"success"})}),2e3):(clearInterval(e.autorefresh),clearInterval(e.timer),e.$message({showClose:!0,message:"已获取最新记录",type:"success"})),setTimeout((function(){clearInterval(e.autorefresh),clearInterval(e.timer),"[]"==JSON.stringify(e.tableData)||void 0==JSON.stringify(e.tableData)?(e.getOldList(),e.$message({showClose:!0,message:"请求已超时，已获取历史记录",type:"warning"})):e.$message({showClose:!0,message:"已获取最新记录",type:"success"})}),5e3)},initData:function(){var e=this;e.autorefresh=setInterval((function(){e.getNewList()}),1e3)},getNewList:function(){var e=this;this.firstNum++,Object(o["a"])({url:"/sec/lBMeasureRecordTree?nodeId="+e.nodeId,method:"post"}).then((function(t){var a=t.data;0==a.total?e.emptytxt=!0:e.emptytxt=!1,a.data&&(a.data.map((function(e,t){e.time=Object(r["a"])(e.time)})),e.tableData=a.data,e.total2=a.data.length,e.recordType="list")}))},getOldList:function(){var e=this;Object(o["a"])({url:"/sec/lBMeasureRecordTreeOld?nodeId="+e.nodeId,method:"post"}).then((function(t){var a=t.data;a.data&&(a.data.map((function(e,t){e.time=Object(r["a"])(e.time)})),e.tableData=a.data,e.total2=a.data.length,e.recordType="old"),0==a.total?e.emptytxt=!0:e.emptytxt=!1}))},loadData:function(){var e=this;Object(o["a"])({url:"/sec/lBMeasureTree?nodeId="+this.nodeId,method:"post"}).then((function(t){var a=t.data;a.data&&(a.data.map((function(e,t){e.time=Object(r["a"])(e.time),e.show=!1,e.num=t,e.pushed=!1})),e.tableData2=a.data,e.total3=a.data.length),0==a.total?e.emptytxt2=!0:e.emptytxt2=!1}))},indexMethod2:function(e){return 1===this.currentPage3?e<9?"0"+(e+1):e+1:e+1+this.pageSize3*(this.currentPage3-1)},reAcquDia:function(){0==this.onlineStatus?this.$message({showClose:!0,message:"终端已离线",type:"error"}):this.dialogVisible1=!0},reAcqu:function(){var e=this;Object(o["a"])({url:"/sec/lBMeasureRecordTree?nodeId="+e.nodeId,method:"post"}).then((function(t){var a=t.data;0==a.data.length?e.emptytxt2=!0:e.emptytxt2=!1,a.data.length>0&&a.data.map((function(e,t){e.time=Object(r["a"])(e.time),e.show=!1,e.num=t,e.pushed=!1})),e.total3=a.data.length,e.tableData2=a.data,e.$message({showClose:!0,message:"已获取最新记录",type:"success"}),e.savedItem={},e.dialogVisible1=!1}))},submit:function(){var e,t=this,a=this,s=!1,i=Object(d["a"])(this.tableData2);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.show)return this.$message.warning("请先保存当前编辑项")}}catch(h){i.e(h)}finally{i.f()}this.tableData2.map((function(e,a){e.bootMeasures.map((function(a,s){a.nodeId=t.nodeId,a.name=e.name,a.stage=e.stage}))}));var n,l=this.tableData2.reduce((function(e,t){return e.concat(t.bootMeasures)}),[]),c=Object(d["a"])(l);try{for(c.s();!(n=c.n()).done;){var u=n.value;if(""==u.hash||""==u.stage){s=!0,a.$message({message:"必填参数不可为空",type:"error",showClose:!0});break}s=!1}}catch(h){c.e(h)}finally{c.f()}0==s&&Object(o["a"])({url:"/sec/creatBMeasurePolicy",method:"post",data:l}).then((function(e){e.data;a.$message({showClose:!0,message:"操作成功",type:"success"}),a.$emit("handleSuccess"),a.diaClose()}))},stageVal:function(e){},cancelstageTips:function(){this.stageTips=!1},cancelHashtips:function(){this.hashtips=!1},save1:function(e,t){var a=this,s=!1,i=!1;""==e.stage?(s=!0,a.$message({message:"必填参数不可为空",type:"error",showClose:!0}),a.stageTips=!0):(s=!1,a.stageTips=!1);var o,r=Object(d["a"])(e.bootMeasures);try{for(r.s();!(o=r.n()).done;){var n=o.value;if(""==n.hash){i=!0,a.hashTips=!0,a.$message({message:"请填写已添加的Hash之后再保存",type:"error",showClose:!0});break}if(64!=n.hash.length){i=!0,a.hashTips=!0,a.$message({message:"请填写正确长度的Hash",type:"error",showClose:!0});break}i=!1,a.hashTips=!1,n.saved=!0}}catch(l){r.e(l)}finally{r.f()}0==s&&0==i&&(a.savedItem.stage=e.stage,a.savedItem.name=e.name,a.savedItem.bootMeasures=JSON.parse(JSON.stringify(e.bootMeasures)),e.added=!1,e.show=!1,e.saved=!0)},cancel:function(e,t){var a=this;e.pushed?e.saved?(e.bootMeasures.map((function(t,a){!1===t.hasOwnProperty("saved")&&e.bootMeasures.splice(a,1)})),e.bootMeasures=a.savedItem.bootMeasures,e.name=a.savedItem.name,e.stage=a.savedItem.stage,e.added=!1,e.show=!1):e.saved||a.tableData2.splice(t,1):e.pushed||(e.saved?e.bootMeasures.map((function(t,a){0==t.hasOwnProperty("saved")&&e.bootMeasures.splice(a,1)})):e.saved||e.bootMeasures.map((function(t,a){t.hashadd&&e.bootMeasures.splice(a,1)})),e.bootMeasures=a.savedItem.bootMeasures,e.name=a.savedItem.name,e.stage=a.savedItem.stage,e.added=!1,e.show=!1)},edit:function(e,t){var a,s=Object(d["a"])(this.tableData2);try{for(s.s();!(a=s.n()).done;){var i=a.value;if(i.show)return this.$message.warning("请先保存当前编辑项")}}catch(o){s.e(o)}finally{s.f()}e.show=!0,1==e.pushed&&(e.added=!0),e.pushed||e.saved||(this.savedItem.stage=e.stage,this.savedItem.name=e.name,this.savedItem.bootMeasures=JSON.parse(JSON.stringify(e.bootMeasures)))},handleAdd:function(){var e,t=Object(d["a"])(this.tableData2);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.show)return this.$message.warning("请先保存当前编辑项")}}catch(s){t.e(s)}finally{t.f()}this.hashTips=!1,this.tableData2.push({name:"",stage:"",bootMeasures:[{hash:"",name:"",stage:""}],added:!0,show:!0,num:this.tableData2.length,pushed:!0})},handleDel:function(e,t){this.tableData2.splice(t,1)},addInput:function(e,t){var a,s=this,i=!1,o=Object(d["a"])(e.bootMeasures);try{for(o.s();!(a=o.n()).done;){var r=a.value;if(""==r.hash){i=!0,s.hashTips=!0,s.$message({message:"请填写已添加的Hash之后再添加",type:"error",showClose:!0});break}s.hashTips=!1,i=!1}}catch(n){o.e(n)}finally{o.f()}0==i&&e.bootMeasures.push({hash:"",hashadd:!0,name:e.name,stage:e.stage})},delHash:function(e,t,a){e.bootMeasures.splice(a,1)},hashChange:function(e){this.hashTips=!1}},destroyed:function(){clearInterval(this.autorefresh),clearInterval(this.timer)}}),V=j,R=(a("b2d7"),a("806c"),Object(f["a"])(V,N,T,!1,null,"073a0555",null)),P=R.exports,E={name:"StartMeasurement",components:{ConfigPop:k,MeasureDetails:B,PolicyRecord:C,MeasureRecord:P},data:function(){return{loading:!1,formInline:{terminalName:"",startDate:"",endDate:""},advancedSearch:!0,advancedFlag:!1,emptytxt:"",startMeasureData:[],orderBy:"installer_time desc",currentPage:1,total:0,pageSize:10,pageShow:!0,autorefresh:"",showDialog:!1,mask:!1,rowMessage:{}}},created:function(){Object(n["b"])(this.searchData)},mounted:function(){this.loadData()},beforeDestroy:function(){document.onkeydown=null},methods:{loadData:function(){var e=this;this.loading=!0,Object(o["a"])({url:"/sec/lBMeasureListAll",method:"post",data:{condition:this.formInline.terminalName,firstTime:this.formInline.startDate,lastTime:this.formInline.endDate,system_type:"1",orderBy:this.orderBy,searchPage:this.currentPage,searchSize:this.pageSize}}).then((function(t){var a=t.data;e.loading=!1,a.list&&(a.list.map((function(e,t){e.installerTime=Object(r["a"])(e.installerTime)})),e.startMeasureData=a.list,e.total=a.total),0==a.total?e.emptytxt=!0:e.emptytxt=!1}))},statusVal:function(e){var t=this.$createElement,a="";if(null==e.lpolicyStatus)a="";else if(0==e.lpolicyStatus.bmeasureStatus)a=t("span",{class:"wathet"},["已下发"]);else if(1==e.lpolicyStatus.bmeasureStatus)a=t("span",{class:"green"},["下发配置成功"]);else if(2==e.lpolicyStatus.bmeasureStatus){var s=Object(n["a"])(e.lpolicyStatus.bmeasureRes);a=s?t("span",{class:"red"},["下发失败（",s,"）"]):e.lpolicyStatus.bmeasureRes?t("span",{class:"red"},["下发失败（错误码：",e.lpolicyStatus.bmeasureRes,"）"]):t("span",{class:"red"},["下发失败"])}else a=t("span",{class:"grey"},["初始化状态"]);return a},switchBtn:function(){this.advancedSearch=!this.advancedSearch,this.advancedFlag=!this.advancedFlag},searchData:function(){var e=this;this.currentPage=1,this.loadData(),this.pageShow=!1,this.$nextTick((function(){e.pageShow=!0}))},indexMethod:function(e){return 1===this.currentPage?e<9?"0"+(e+1):e+1:e+1+this.pageSize*(this.currentPage-1)},sortChange:function(e,t,a){a=e.prop.replace(/([A-Z])/g,"_$1").toLowerCase();"ascending"==e.order?this.orderBy=a:this.orderBy=a+" desc",this.loadData()},handleSizeChange:function(e){var t=this;this.currentPage=1,this.pageSize=e,this.pageShow=!1,this.$nextTick((function(){t.pageShow=!0})),this.loadData()},handleCurrentChange:function(e){this.currentPage=e,this.loadData()},openDialog:function(e){this.showDialog=!0,this.rowMessage=JSON.parse(JSON.stringify(e)),this.mask=!0},closeDialog:function(){this.showDialog=!1,this.mask=!1},resetForm:function(){this.formInline.endDate="",this.formInline=Object.assign({},void 0),this.$refs.formInline.resetFields()},openConfig:function(e){0==e.onlineStatus?this.$message({message:"终端已离线",type:"error",showClose:!0}):this.$refs.poplay.diaOpen(e)},policyRecord:function(e){this.$refs.record.diaOpen(e)},measureRecord:function(e){this.$refs.record.diaOpen(e)},refreshData:function(){var e=this,t=0;e.autorefresh=setInterval((function(){t++,e.loadData(),t>5&&clearInterval(e.autorefresh)}),2e3)}},destroyed:function(){clearInterval(this.autorefresh)}},L=E,J=(a("2018"),Object(f["a"])(L,s,i,!1,null,"3dfae36c",null));t["default"]=J.exports},c95e:function(e,t,a){},d58f:function(e,t,a){var s=a("1c0b"),i=a("7b0b"),o=a("44ad"),r=a("50c4"),n=function(e){return function(t,a,n,l){s(a);var c=i(t),d=o(c),u=r(c.length),h=e?u-1:0,p=e?-1:1;if(n<2)while(1){if(h in d){l=d[h],h+=p;break}if(h+=p,e?h<0:u<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:u>h;h+=p)h in d&&(l=a(l,d[h],h,c));return l}};e.exports={left:n(!1),right:n(!0)}},fa4e:function(e,t,a){"use strict";a("6cdd")},fb6a:function(e,t,a){"use strict";var s=a("23e7"),i=a("861d"),o=a("e8b5"),r=a("23cb"),n=a("50c4"),l=a("fc6a"),c=a("8418"),d=a("b622"),u=a("1dde"),h=u("slice"),p=d("species"),m=[].slice,f=Math.max;s({target:"Array",proto:!0,forced:!h},{slice:function(e,t){var a,s,d,u=l(this),h=n(u.length),g=r(e,h),b=r(void 0===t?h:t,h);if(o(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?i(a)&&(a=a[p],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return m.call(u,g,b);for(s=new(void 0===a?Array:a)(f(b-g,0)),d=0;g<b;g++,d++)g in u&&c(s,d,u[g]);return s.length=d,s}})}}]);
//# sourceMappingURL=chunk-0c75d8d9.e3a9ecf0.js.map