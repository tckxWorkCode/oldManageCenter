(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52f7127a"],{"19a9":function(e,t,a){"use strict";a("74bd")},"27ef":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAEhElEQVRogeWaT2wUVRzHv/PHMt1i9w+6KVaMUofQ2oAHQrQ1JJCwXoyBk5YaSIyBhAR71Tn00MOgR/QEeiIUj/XApRNjo4nVQ0PVVPpnUlCaAg1pSZPtUrp017y3b4bZ7m773rS7s1s+yWYnk/fe7/vd2fd+789I2CJ0y9gP4CiAQwD2kVsAdgJoYBGWACQB2ACmAIwAGLIT5sRWKNiUEd0yWgGcBtANYI/PZmYA9AO4aifMcb9afBnRLaMDQC+A9/0GLsEggD47YQ6LVhQyolsG+dUvATi5ScEbMQCgx06YM7wVuI3olvEZMxEqh/IipJiZ73kKb2hEtwwi/ArrB0FA+s9ZO2GmfBvRLSMK4AaAjoBMOJA+84GdMB+VKlDSCDPxK4D2cioUYAzAkVJm5BImQuxJVIsJMC03mLYCihphfSLov1MxOpi2AgqMsNEpqI7NQzfTmEdeH2F5YqKCQ6xfyAi235tn1j6RSuaJzRBiWl3cJ8KmHb/VgAkvnc50xvtEegOXJY6rmT4RNou9VTv682gjs2aV3TnNU+PdWAu+OdCF8Av1ZVW2mH6Mz//+Ab8vTPMUJ9q/dP5aXMNt16uHqYlsNpv3IWQymU1Iz4fEILE4odpltrLjWhSpskK/FxYWkEwmkUqlMD8/T03Mzc0hnU4LCX5iT2Pl9r/0+mlmFTcfTmElk86LxcEe4kFmy9OKk569j4m33sF462Gk7z/AV6P96PqpDxdv9vuRclRla+yKI+2og9L4IiBJkDUNMa2RSojtaPQj5ZDKNgqEkCSp5IcX9aVdaPtvjJaWG0I4Hz2Bj1qOYZfmy8g+le12cPF4dSX3q8VibvFQKDcRaGpqEo5ODHjxmnBicaKrbMuGi8t3fkGzFkGzFoXAjy8EGQRnlx/RWALslHTLyIoGu/TGSbzd0FwWI38uzaLnzoBwPZWjjAtJiN8ePIVGVRMOxMtu7Ebn6+248Nd13oRIkdkOIBckSRET5U6IJIZAQiQsyWwbk4utTojL45NYnpii1yQR/jF3C09WhRMiISmzvdiKQxLi5IFOTB58D+l7D/D16HWc+dnExVFfCdGW2YZyxZHrNSiRMJRohF7H66NUQlyL+JEypbJd8U9FaimKAlmWaQJ0vsk9kYSoxKJou/sPvSZGzkU/xMdvHkO4jjsbeBkhRoZ4S6ee5pJUJPLsV3MSYjweF45ODHjxmnBicTLkLKzu8syAWxpeRl/rCbxSF85lLgdFgu8MSdpZ9bQlSbi3soje8R8xvfSQp4UZO2G+5uQR0sO+2KgGabh75DtkLo8he3vRvS+fa4e0N+zHBm2HtOf6aItBPtMq0gQdHbbNUpeuENlJ0WDwmoQZdE65vLsofbWhPQ9Xs2uE7Q+Jz9aCY8B7RLd2p7GHbUdWOymmFUWNsL3UnhowUnC+WHTw1y3jWhXvyPfbCfOTtTdLnY+cZcdd1cYw01bA9j56Q66/kApHquTJDK9nAusZwTMzx51pQECQ2MfXM4Hn6oUBL9viFQ4vNf9SzVpq/jWnYgT64hmA/wHflZvY1m0A2wAAAABJRU5ErkJggg=="},"61e2":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABYUlEQVR42lWSuY7CQAyG53GhICFItKCAaDg2BRQ8SCQKELRB4hCnEo6CCgrC0SFICB94lWVdzPgc/789KgzDKIrCj6Acj0fXdReLxel0Eo8IuuJ6Pp+cnueVSqV0Ol0uly3L0jStUChst1uSJEFJUa/XI9bv96MvGQwGuq53u10x36l0NAzjfD6jbzabn4+sVivBQzb6LwDTNEejEcb9fk8kErztOE4ymbzdbrSeTqf5fP79KvAzmYyguVwugoEygO52O9HBRkgtl8tKpRKTfTwe1+u11WrRF12c9Xp9PB6r+Xxeq9XiOSC2bTOKw+EglZzVapX5KNgAAJS4giAQZvv9/rs4lUr5vq+whVY8I3jMZjPJAxihYrGIqTDAkM1mqZNwo9FoNpsotIINS1mv138r6HQ6uIbDoWSDhCcmkwnc2+22gFFxX/YOG2KwZAVU5nI5cP/7A98i3wVIjExYxvICbA7xkncfoMAAAAAASUVORK5CYII="},"74bd":function(e,t,a){},"90b0":function(e,t,a){},"9c7f":function(e,t,a){"use strict";a("90b0")},a15b:function(e,t,a){"use strict";var n=a("23e7"),s=a("44ad"),i=a("fc6a"),o=a("a640"),r=[].join,l=s!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:l||!c},{join:function(e){return r.call(i(this),void 0===e?",":e)}})},f7a6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"container"},[a("div",{staticClass:"topNav"},[a("el-breadcrumb",{staticClass:"breadNav",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"crumb1"},[e._v("首页")]),a("el-breadcrumb-item",{staticClass:"crumb1"},[e._v("可信验证")]),a("el-breadcrumb-item",{staticClass:"crumb2"},[e._v("TPCM管理")])],1)],1),a("div",{staticClass:"wrap"},[a("div",{staticClass:"search"},[a("el-form",{ref:"formInline",staticClass:"formInline",attrs:{inline:!0,"label-position":e.labelPosition,"label-width":"150px",model:e.formInline,size:"small"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"终端名称/网络地址：",prop:"terminalName"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入终端名称/网络地址",oninput:"value=value.replace(/[%]/g, '')"},model:{value:e.formInline.terminalName,callback:function(t){e.$set(e.formInline,"terminalName",t)},expression:"formInline.terminalName"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.advancedSearch,expression:"advancedSearch==true"}],attrs:{label:"日期：",prop:"startDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"date",placeholder:"选择开始时间"},model:{value:e.formInline.startDate,callback:function(t){e.$set(e.formInline,"startDate",t)},expression:"formInline.startDate"}}),e._v(" "),a("span",{},[e._v("至")]),e._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"date",placeholder:"选择结束时间"},model:{value:e.formInline.endDate,callback:function(t){e.$set(e.formInline,"endDate",t)},expression:"formInline.endDate"}})],1),a("el-form-item",{staticClass:"advancedBtn"},[a("el-button",{staticClass:"resetBtn",attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")]),a("el-button",{staticClass:"searchBtn",attrs:{size:"small"},on:{click:e.searchData}},[e._v("查询")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.advancedFlag,expression:"advancedFlag==true"}],staticClass:"gaoji",attrs:{size:"small"},on:{click:e.switchBtn}},[e._v("展开"),a("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"font-weight":"bold"}})]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.advancedFlag,expression:"advancedFlag==false"}],staticClass:"gaoji",attrs:{size:"small"},on:{click:e.switchBtn}},[e._v("收起"),a("i",{staticClass:"el-icon-arrow-up el-icon--right",staticStyle:{"font-weight":"bold"}})])],1)],1)],1),a("div",{staticClass:"mainContainer"},[a("div",{staticClass:"tableTitle"},[e._v("TPCM管理")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"TpcmTable",staticStyle:{width:"99.9%","font-size":"14px"},attrs:{data:e.TpcmData,size:"small","cell-style":{color:"rgba(0, 0, 0, 0.9)"},"element-loading-text":"加载中，请稍后","tooltip-effect":"light","header-cell-style":{height:"48px","background-color":"#F0F2F5",color:"rgba(0, 0, 0, 0.72)",padding:"0px"},fit:!0,"row-key":"id"},on:{"sort-change":e.sortChange}},[a("template",{slot:"empty"},[a("div",[e._v("暂无数据")])]),a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"80px"}}),a("el-table-column",{attrs:{prop:"nodeName",label:"终端名称","min-width":"110%","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"nodeIp",label:"网络地址","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticStyle:{color:"#1ac492",cursor:"pointer"},on:{click:function(a){return e.openDialog(t.row)}}},[e._v(e._s(t.row.nodeIp))])]}}])}),a("el-table-column",{attrs:{prop:"beTpcmType",label:"TPCM类型","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.beTpcmType?a("span",[e._v("模拟可信根")]):"1"==t.row.beTpcmType?a("span",[e._v("主核")]):"2"==t.row.beTpcmType?a("span",[e._v("附加核")]):"3"==t.row.beTpcmType?a("span",[e._v("模拟")]):"5"==t.row.beTpcmType?a("span",[e._v("外置")]):a("span",[e._v(e._s(t.row.beTpcmType))])]}}])}),a("el-table-column",{attrs:{prop:"beHostTime",label:"获取时间","show-overflow-tooltip":!0,sortable:"custom","render-header":e.renderHeader}}),a("el-table-column",{attrs:{prop:"beCmdHandled",label:"已处理命令数量","render-header":e.renderHeader}}),a("el-table-column",{attrs:{prop:"beBootTimes",label:"启动次数"}}),a("el-table-column",{attrs:{prop:"beDmeasureTimes",label:"动态度量次数","render-header":e.renderHeader}}),a("el-table-column",{attrs:{prop:"beFileIntegrityMeasureTimes",label:"程序启动度量次数","render-header":e.renderHeader}}),a("el-table-column",{attrs:{prop:"beFileNotifyTimes",label:"通知次数","min-width":"80%"}}),a("el-table-column",{attrs:{prop:"beBootTrustState",label:"启动可信状态","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.beBootTrustState?a("span",{staticClass:"wathet"},[e._v("可信")]):"1"==t.row.beBootTrustState?a("span",{staticClass:"red"},[e._v("不可信")]):"2"==t.row.beBootTrustState?a("span",{staticClass:"grey"},[e._v("未度量")]):a("span",[e._v(e._s(t.row.beBootTrustState))])]}}])})],2),e.pageShow?a("el-pagination",{staticClass:"paging",attrs:{align:"right","current-page":e.currentPage.sync,"page-sizes":[10,20],"page-size":e.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)])]),1==e.showDialog?a("div",{staticClass:"dialogContent"},[a("tpcm-pop",{ref:"poplay",attrs:{rowMessage:e.rowMessage},on:{closeDialog:e.closeDialog}})],1):e._e(),1==e.mask?a("div",{staticClass:"mask",on:{click:e.closeDialog}}):e._e()])},s=[],i=(a("d81d"),a("ac1f"),a("5319"),a("b775")),o=a("ac95"),r=a("b893"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dialogStyle"},[n("div",{staticClass:"title"},[n("span",[e._v("TPCM详情")]),n("span",{staticClass:"closeBtn",on:{click:e.closeDialog}},[n("i",{staticClass:"el-icon-close"})])]),n("div",{staticClass:"terminalInfo"},[n("img",{staticClass:"terminalImg",attrs:{src:a("27ef"),alt:""}}),n("span",[e._v(e._s(this.rowMessage.nodeIp))]),n("img",{staticClass:"questionImg",attrs:{src:a("61e2"),title:"网络地址"}})]),n("div",{staticClass:"container"},e._l(e.tableData,(function(t,a){return n("div",{key:a,staticClass:"rowStyle"},[n("span",{staticClass:"itemType"},[e._v(e._s(t.name))]),n("span",{staticClass:"itemValue"},[e._v(e._s(t.value))])])})),0)])},c=[],m=(a("fb6a"),a("a15b"),a("a434"),{name:"TpcmPop",props:{rowMessage:{type:Object}},data:function(){return{tableData:[]}},mounted:function(){this.loadData()},methods:{intToByte:function(e){var t=[],a=4;do{t[a--]=255&e,e>>=8}while(a);return t.join(".").slice(1)},loadData:function(){var e=this,t=this;Object(i["a"])({url:"/sec/lTpcmAndTcmInfo?id="+this.rowMessage.id,method:"post"}).then((function(a){var n=a.data;if(t.tableData.splice(0,t.tableData.length),n.object){var s=n.object;s.beHostTime=Object(o["a"])(s.beHostTime),"0"==s.beBootTrustState?s.beBootTrustState="可信":"1"==s.beBootTrustState?s.beBootTrustState="不可信":"2"==s.beBootTrustState?s.beBootTrustState="未度量":s.beBootTrustState=s.beBootTrustState,"1"==s.beTpcmType?s.beTpcmType="主核":"2"==s.beTpcmType?s.beTpcmType="附加核":"3"==s.beTpcmType?s.beTpcmType="模拟":"5"==s.beTpcmType?s.beTpcmType="外置":s.beTpcmType=s.beTpcmType,"0"==s.beSrkGenerated?s.beSrkGenerated="未生成":s.beSrkGenerated="已生成",t.tableData.push({name:"获取时间",value:s.beHostTime},{name:"已处理命令数量",value:s.beCmdHandled},{name:"待处理命令数量",value:s.beCmdPending},{name:"错误命令数量",value:s.beCmdErrorParam},{name:"拒绝接收命令数量",value:s.beCmdErrorRefused},{name:"完整性基准库有效条数",value:s.beFileIntegrityValid},{name:"完整性基准库总条数",value:s.beFileIntegrityTotal},{name:"启动基准库条数",value:s.beBootMeasureRefBumber},{name:"动态度量基准库条数",value:s.beDynamicMeasureRefBumber},{name:"管理员证书数量",value:s.beAdminCertNumber},{name:"信任的证书数量",value:s.beTrustedCertNumber},{name:"启动次数",value:s.beBootTimes},{name:"动态度量次数",value:s.beDmeasureTimes},{name:"程序启动度量次数",value:s.beFileIntegrityMeasureTimes},{name:"通知次数",value:s.beFileNotifyTimes},{name:"TPCM类型",value:s.beTpcmType},{name:"总内存(字节)",value:s.beTpcmTotalMem},{name:"可用内存(字节)",value:s.beTpcmAvailableMem},{name:"存储空间(字节)",value:s.beTpcmNvsapceSize},{name:"可用存储空间(字节)",value:s.beTpcmNvsapceAvailbleSize},{name:"启动可信状态",value:s.beBootTrustState},{name:"可信操作系统版本号",value:e.intToByte(s.beTrustOsVersion)},{name:"CPU基础固件版本号",value:e.intToByte(s.beCpuFirmwareVersion)},{name:"BIOS固件版本号",value:e.intToByte(s.beBiosFirmwareVersion)},{name:"TPCM版本号",value:e.intToByte(s.beTpcmFirmwareVersion)},{name:"CPU数量",value:s.beTpcmCpuNumber},{name:"根存储密钥是否生成",value:s.beSrkGenerated})}}))},closeDialog:function(){this.$emit("closeDialog")}}}),d=m,u=(a("9c7f"),a("2877")),p=Object(u["a"])(d,l,c,!1,null,"e286e868",null),b=p.exports,v={name:"TpcmInfo",components:{TpcmPop:b},data:function(){return{loading:!1,formInline:{terminalName:"",startDate:"",endDate:""},labelPosition:"right",advancedSearch:!0,advancedFlag:!1,emptytxt:!1,TpcmData:[],orderBy:"be_host_time desc",currentPage:1,total:0,pageSize:10,pageShow:!0,showDialog:!1,mask:!1,rowMessage:{}}},created:function(){Object(r["b"])(this.searchData)},mounted:function(){this.loadData()},beforeDestroy:function(){document.onkeydown=null},methods:{loadData:function(){var e=this;this.loading=!0,Object(i["a"])({url:"/sec/lTpcmAndTcmList ",method:"post",data:{condition:this.formInline.terminalName,firstTime:this.formInline.startDate,lastTime:this.formInline.endDate,orderBy:this.orderBy,system_type:"1",searchPage:this.currentPage,searchSize:this.pageSize}}).then((function(t){var a=t.data;e.loading=!1,a.list&&(a.list.map((function(e,t){e.beHostTime=Object(o["a"])(e.beHostTime)})),e.total=a.total,e.TpcmData=a.list),0==a.total?e.emptytxt=!0:e.emptytxt=!1}))},switchBtn:function(){this.advancedSearch=!this.advancedSearch,this.advancedFlag=!this.advancedFlag},searchData:function(){var e=this;this.currentPage=1,this.loadData(),this.pageShow=!1,this.$nextTick((function(){e.pageShow=!0}))},renderHeader:function(e,t){var a=t.column,n=(t.$index,document.createElement("span"));return n.innerText=a.label,document.body.appendChild(n),a.minWidth=n.getBoundingClientRect().width+20,document.body.removeChild(n),e("span",a.label)},indexMethod:function(e){return 1===this.currentPage?e<9?"0"+(e+1):e+1:e+1+this.pageSize*(this.currentPage-1)},sortChange:function(e,t,a){a=e.prop.replace(/([A-Z])/g,"_$1").toLowerCase();"ascending"==e.order?this.orderBy=a:this.orderBy=a+" desc",this.loadData()},handleSizeChange:function(e){var t=this;this.currentPage=1,this.pageSize=e,this.pageShow=!1,this.$nextTick((function(){t.pageShow=!0})),this.loadData()},handleCurrentChange:function(e){this.currentPage=e,this.loadData()},openDialog:function(e){this.showDialog=!0,this.rowMessage=JSON.parse(JSON.stringify(e)),this.mask=!0},closeDialog:function(){this.showDialog=!1,this.mask=!1},resetForm:function(){this.formInline.endDate="",this.formInline=Object.assign({},void 0),this.$refs.formInline.resetFields()}}},h=v,f=(a("19a9"),Object(u["a"])(h,n,s,!1,null,"4ac6793c",null));t["default"]=f.exports},fb6a:function(e,t,a){"use strict";var n=a("23e7"),s=a("861d"),i=a("e8b5"),o=a("23cb"),r=a("50c4"),l=a("fc6a"),c=a("8418"),m=a("b622"),d=a("1dde"),u=d("slice"),p=m("species"),b=[].slice,v=Math.max;n({target:"Array",proto:!0,forced:!u},{slice:function(e,t){var a,n,m,d=l(this),u=r(d.length),h=o(e,u),f=o(void 0===t?u:t,u);if(i(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?s(a)&&(a=a[p],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return b.call(d,h,f);for(n=new(void 0===a?Array:a)(v(f-h,0)),m=0;h<f;h++,m++)h in d&&c(n,m,d[h]);return n.length=m,n}})}}]);
//# sourceMappingURL=chunk-52f7127a.80fb7bb7.js.map